<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      PXF的启动、停止和重启 |
    Greenplum Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/gpdb-docs-cn/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/gpdb-docs-cn/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/gpdb-docs-cn/images/favicon.ico' rel='shortcut icon'>

  <script src="/gpdb-docs-cn/javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_pxf x6-0_pxf_cfginitstart_pxf has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "greenplum.org";
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="/">Greenplum Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to Greenplum Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="js-sidenav nav-container" role="navigation">
  <a class="sidenav-title" data-behavior="SubMenuMobile">  Doc Index</a>
  <div class="nav-content">
    <ul>
      <li>
        <a href="/gpdb-docs-cn/v6/homenav.html">Greenplum数据库&reg; 6.0文档</a>
      </li>
      <li><a href="/gpdb-docs-cn/v6/pxf/overview_pxf.html" format="markdown">Greenplum平台扩展框架(PXF)</a></li>
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/pxf/intro_pxf.html" format="markdown">PXF介绍</a>
        <ul>
          <li><a href="/gpdb-docs-cn/v6/pxf/filter_push.html" format="markdown">PXF谓词下推</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/col_project.html" format="markdown">PXF列投影</a></li>
        </ul>
      </li>
      <li class="has_submenu">
        <span>PXF管理手册</span>
        <ul>
          <li class="has_submenu">
            <a href="/gpdb-docs-cn/v6/pxf/instcfg_pxf.html" format="markdown">配置PXF</a>
            <ul>
              <li><a href="/gpdb-docs-cn/v6/pxf/about_pxf_dir.html" format="markdown">PXF安装和配置目录</a></li>
              <li><a href="/gpdb-docs-cn/v6/pxf/install_java.html" format="markdown">为PXF安装JAVA环境</a></li>
              <li><a href="/gpdb-docs-cn/v6/pxf/init_pxf.html" format="markdown">初始化PXF</a></li>
              <li><a href="/gpdb-docs-cn/v6/pxf/cfg_server.html" format="markdown">配置PXF服务器</a></li>
              <li class="has_submenu">
                <a href="/gpdb-docs-cn/v6/pxf/client_instcfg.html" format="markdown">配置PXF HADOOP连接器（可选）</a>
                <ul>
                  <li>
                    <a href="/gpdb-docs-cn/v6/pxf/pxfuserimpers.html">配置用户模拟和代理</a>
                  </li>
                  <li>
                    <a href="/gpdb-docs-cn/v6/pxf/pxf_kerbhdfs.html" format="markdown">为安全HDFS配置PXF</a>
                  </li>
                </ul>
              </li>
              <li><a href="/gpdb-docs-cn/v6/pxf/s3_objstore_cfg.html" format="markdown">配置Minio和S3对象存储的连接器（可选）</a> </li>
              <li><a href="/gpdb-docs-cn/v6/pxf/objstore_cfg.html" format="markdown">配置Azure和Google云端存储的连接器（可选）</a> </li>
              <li><a href="/gpdb-docs-cn/v6/pxf/jdbc_cfg.html" format="markdown">配置JDBC连接器（可选）</a> </li>
              <li><a href="/gpdb-docs-cn/v6/pxf/cfghostport.html" format="markdown">配置PXF客户端主机和端口(可选)</a> </li>
            </ul>
          </lie>
          <li><a href="/gpdb-docs-cn/v6/pxf/upgrade_pxf.html" format="markdown">升级PXF</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/cfginitstart_pxf.html" format="markdown">PXF的启动、停止和重启</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/using_pxf.html" format="markdown">授权用户访问PXF</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/reg_jar_depend.html" format="markdown">注册PXF的jar依赖</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/monitor_pxf.html" format="markdown">监控PXF</a></li>
        </ul>
      </li>
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/pxf/access_hdfs.html" format="markdown">使用PXF访问hadoop</a>
        <ul>
          <li><a href="/gpdb-docs-cn/v6/pxf/hdfs_text.html" format="markdown">读写文本数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/hdfs_avro.html" format="markdown">读取Avro数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/hdfs_json.html" format="markdown">读取JSON数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/hdfs_parquet.html" format="markdown">读写Parquet数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/hdfs_seqfile.html" format="markdown">读写SequenceFile数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/hdfs_fileasrow.html" format="markdown">将多行文本文件读入单个表行</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/hive_pxf.html" format="markdown">读取Hive表数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/hbase_pxf.html" format="markdown">读取HBase表数据</a></li>
        </ul>
      </li>
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/pxf/access_objstore.html" format="markdown">使用PXF访问Azure，Google云端存储，Minio和S3对象存储</a>
        <ul>
          <li><a href="/gpdb-docs-cn/v6/pxf/access_s3.html" format="markdown">About Accessing the S3 Object Store</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/objstore_text.html" format="markdown">读取和写入文本数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/objstore_avro.html" format="markdown">读取Avro数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/objstore_json.html" format="markdown">读取JSON数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/objstore_parquet.html" format="markdown">读写Parquet数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/objstore_seqfile.html" format="markdown">读写SequenceFile数据</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/objstore_fileasrow.html" format="markdown">将多行文本文件读入单个表行</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/read_s3_s3select.html" format="markdown">使用S3 Select从S3读取CSV和Parquet数据</a></li>
        </ul>
      </li>
      <li><a href="/gpdb-docs-cn/v6/pxf/jdbc_pxf.html" format="markdown">使用PXF访问SQL数据库（JDBC）</a></li>
      <li><a href="/gpdb-docs-cn/v6/pxf/troubleshooting_pxf.html" format="markdown">PXF故障排除</a></li>
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/pxf/ref/pxf-ref.html" format="markdown">PXF实用程序手册</a>
        <ul>
          <li><a href="/gpdb-docs-cn/v6/pxf/ref/pxf-cluster.html" format="markdown">pxf cluster</a></li>
          <li><a href="/gpdb-docs-cn/v6/pxf/ref/pxf.html" format="markdown">pxf</a></li>
        </ul>
      </li>
      <!--li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/pxf/sdk/dev_overview.html" format="markdown">Using the PXF Java SDK</a>
        <ul>
          <li>
            <a href="/gpdb-docs-cn/v6/pxf/sdk/dev_concepts.html" format="markdown">PXF Developer Concepts</a>
          </li>
          <li>
            <a href="/gpdb-docs-cn/v6/pxf/sdk/pxfapi.html" format="markdown">Introducing the PXF API</a>
          </li>
          <li>
            <a href="/gpdb-docs-cn/v6/pxf/sdk/build_conn.html" format="markdown">Building a Connector</a>
          </li>
          <li class="has_submenu">
            <a href="/gpdb-docs-cn/v6/pxf/sdk/deploy_conn.html" format="markdown">Deploying a Connector</a>
            <ul>
              <li>
            <a href="/gpdb-docs-cn/v6/pxf/sdk/deploy_profile.html" format="markdown">Deploying a Profile</a>
              </li>
            </ul>
          </li>
        </ul>
      </li-->
      <li>
         <a href="/gpdb-docs-cn/v6/admin_guide/external/pxf-overview.html" format="dita" scope="peer">Back to the Administrator Guide</a>
      </li>
    </ul>
  </div>
</div>
<!--end of sub-nav-->

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" >
    PXF的启动、停止和重启
  </h1>

          <div id="js-quick-links" >
            <div class="quick-links"><ul>
<li><a href="#start_pxf">&#21551;&#21160;PXF</a></li>
<li><a href="#stop_pxf">&#20572;&#27490;PXF</a></li>
<li><a href="#restart_pxf">&#37325;&#21551;PXF</a></li>
</ul></div>
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        <!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<p>PXF提供了两个管理命令:</p>

<ul>
<li><code>pxf cluster</code> - 管理Greenplum数据库集群中的所有PXF服务实例</li>
<li><code>pxf</code> - 在特定的Greenplum数据库主机上管理PXF服务实例</li>
</ul>

<p><a href="/gpdb-docs-cn/v6/pxf/ref/pxf-cluster.html"><code>pxf cluster</code></a>支持 <code>init</code>, <code>start</code>, <code>status</code>, <code>stop</code>, and <code>sync</code> 子命令。在Greenplum数据库master主机上运行 <code>pxf cluster</code> 子命令时，将在Greenplum数据库集群中的所有segment主机上执行该操作。PXF还在standby主机上运行<code>init</code>和<code>sync</code>命令。</p>

<p><a href="/gpdb-docs-cn/v6/pxf/ref/pxf.html"><code>pxf</code></a>支持<code>init</code>, <code>start</code>, <code>stop</code>, <code>restart</code>, <code>status</code> 操作。这些操作在本地执行，也就是说，如果要在特定的Greenplum数据库segment主机上启动或停止PXF代理，需要登录到该主机并运行命令。</p>

<h2 id="启动pxf"><a id="start_pxf"></a>启动PXF</h2>

<p>初始化PXF之后，必须在Greenplum数据库集群中的每个segment主机上启动PXF。PXF服务启动后，将以<code>gpadmin</code>用户身份在默认端口5888上运行。只有<code>gpadmin</code>用户可以启动和停止pxf服务。</p>

<p>如果要更改默认的PXF配置，则必须在启动PXF之前更新配置。</p>

<p><code>$PXF_CONF/conf</code> 包含用户自定义的配置文件：</p>

<ul>
<li><code>pxf-env.sh</code> - 运行时配置参数</li>
<li><code>pxf-log4j.properties</code> - 日志记录配置参数</li>
<li><code>pxf-profiles.xml</code> - 自定义配置文件定义</li>
</ul>

<p><code>pxf-env.sh</code> 包含以下用户可自定义的配置文件:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default Value</th>
</tr>
</thead><tbody>
<tr>
<td>JAVA_HOME</td>
<td>Java JRE家目录</td>
<td>/usr/java/default</td>
</tr>
<tr>
<td>PXF_LOGDIR</td>
<td>PXF日志目录</td>
<td>$PXF_CONF/logs</td>
</tr>
<tr>
<td>PXF_JVM_OPTS</td>
<td>PXF Java虚拟机的默认选项</td>
<td>-Xmx2g -Xms1g</td>
</tr>
<tr>
<td>PXF_KEYTAB</td>
<td>PXF服务Kerberos主体密钥表文件的绝对路径</td>
<td>$PXF_CONF/keytabs/pxf.service.keytab</td>
</tr>
<tr>
<td>PXF_PRINCIPAL</td>
<td>PXF服务Kerberos主体</td>
<td>gpadmin/_<a href="mailto:HOST@EXAMPLE.COM">HOST@EXAMPLE.COM</a></td>
</tr>
</tbody></table>

<p>您必须将对<code>pxf-env.sh</code>，<code>pxf-log4j.properties</code>或<code>pxf-profiles.xml</code>所做的所有变更同步到Greenplum数据库集群，并在每个segment节点上(重新)启动PXF。</p>

<h3 id="准备"><a id="start_pxf_prereq" class="no-quick-link"></a>准备</h3>

<p>在Greenplum数据库集群中启动PXF之前，请确保：</p>

<ul>
<li>Greenplum数据库集群已启动并正在运行</li>
<li>PXF已经被初始化</li>
</ul>

<h3 id="过程"><a id="start_pxf_proc" class="no-quick-link"></a>过程</h3>

<p>执行以下过程以在Greenplum数据库集群中的每个segment主机上启动PXF。</p>

<ol>
<li><p>登录greenplum master节点</p>
<pre class="highlight shell"><code><span class="gp">$ </span>ssh gpadmin@&lt;gpmaster&gt;
</code></pre></li>
<li><p>在每个segment主机上运行<code>pxf cluster start</code>命令启动pxf服务</p>
<pre class="highlight shell"><code><span class="gp">gpadmin@gpmaster$ </span><span class="nv">$GPHOME</span>/pxf/bin/pxf cluster start
</code></pre></li>
</ol>

<h2 id="停止pxf"><a id="stop_pxf"></a>停止PXF</h2>

<p>如果必须停止PXF,例如如果要升级PXF，则必须在Greenplum数据库集群中的每个segment主机上停止PXF。只有<code>gpadmin</code>用户可以停止PXF服务</p>

<h3 id="准备"><a id="stop_pxf_prereq" class="no-quick-link"></a>准备</h3>

<p>在Greenplum数据库集群中停止PXF之前，请确保Greenplum数据库集群已启动并正在运行。</p>

<h3 id="过程"><a id="stop_pxf_proc" class="no-quick-link"></a>过程</h3>

<p>执行以下过程在Greenplum数据库集群中的每个segment主机上停止PXF。</p>

<ol>
<li><p>登录greenplum master节点</p>
<pre class="highlight shell"><code><span class="gp">$ </span>ssh gpadmin@&lt;gpmaster&gt;
</code></pre></li>
<li><p>在每个segment主机上运行<code>pxf cluster stop</code>命令停止pxf服务。 例如:</p>
<pre class="highlight shell"><code><span class="gp">gpadmin@gpmaster$ </span><span class="nv">$GPHOME</span>/pxf/bin/pxf cluster stop
</code></pre></li>
</ol>

<h2 id="重启pxf"><a id="restart_pxf"></a>重启PXF</h2>

<p>如果必须重新启动PXF，例如在<code>$PXF_CONF/conf</code>中更新了PXF用户配置文件，则可以在Greenplum数据库集群中先停止服务然后再启动PXF服务。</p>

<p>只有<code>gpadmin</code>用户可以重启PXF服务。</p>

<h3 id="准备"><a id="restart_pxf_prereq" class="no-quick-link"></a>准备</h3>

<p>在Greenplum数据库集群中重新启动PXF之前，请确保Greenplum数据库集群已启动并正在运行。</p>

<h3 id="过程"><a id="restart_pxf_proc" class="no-quick-link"></a>过程</h3>

<p>执行以下过程在Greenplum数据库集群中的每个segment上重启PXF。</p>

<ol>
<li><p>登录greenplum master节点:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>ssh gpadmin@&lt;gpmaster&gt;
</code></pre></li>
<li><p>重启PXF:</p>
<pre class="highlight shell"><code><span class="gp">gpadmin@gpmaster$ </span><span class="nv">$GPHOME</span>/pxf/bin/pxf cluster stop
<span class="gp">gpadmin@gpmaster$ </span><span class="nv">$GPHOME</span>/pxf/bin/pxf cluster start
</code></pre></li>
</ol>

        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
