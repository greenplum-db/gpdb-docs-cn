<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      使用函数和操作符 |
    Greenplum Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/gpdb-docs-cn/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/gpdb-docs-cn/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/gpdb-docs-cn/images/favicon.ico' rel='shortcut icon'>

  <script src="/gpdb-docs-cn/javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_admin_guide x6-0_admin_guide_query x6-0_admin_guide_query_topics x6-0_admin_guide_query_topics_functions-operators has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "greenplum.org";
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="/">Greenplum Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to Greenplum Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/../../gpdb-docs-cn/v6/homenav.html">Greenplum数据库® 6.0文档</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/admin_guide.html">管理员指南</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/partI.html">Greenplum数据库概念</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/arch_overview.html">关于Greenplum的架构</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_utilities.html">关于管理和监控工具</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_mvcc.html">关于Greenplum数据库中的并发控制</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/mvcc_example.html">管理事务ID的例子</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_loading.html">关于并行数据装载</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_ha.html">关于Greenplum数据库中的冗余和故障切换</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_statistics.html">关于Greenplum数据库中的数据库统计信息</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/partII.html">管理一个Greenplum系统</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/versioning.html">关于Greenplum数据库发布版本号</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/startstop.html">启动和停止Greenplum数据库</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-accessing-the-database.html">访问数据库</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-establishing-a-database-session.html">建立一个数据库会话</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-supported-client-applications.html">支持的客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-greenplum-database-client-applications.html">Greenplum数据库客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-connecting-with-psql.html">用psql连接</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/pgbouncer.html">使用PgBouncer连接池</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-database-application-interfaces.html">数据库应用接口</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-troubleshooting-connection-problems.html">连接问题的发现及解决</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-configuring-the-greenplum-system.html">配置Greenplum数据库系统</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-about-greenplum-master-and-local-parameters.html">关于Greenplum数据库的Master参数和本地参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-configuration-parameters.html">设置配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-a-local-configuration-parameter.html">设置本地配置参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-a-master-configuration-parameter.html">设置Master配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-at-the-system-level.html">设置系统级别参数</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-at-the-database-level.html">设置数据库级别参数</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-at-the-role-level.html">设置角色级别参数</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-in-a-session.html">设置会话级别参数</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-viewing-server-configuration-parameter-settings.html">查看服务器配置参数设置</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-configuration-parameter-categories.html">配置参数种类</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/compression.html">启用压缩</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-high-availability-features.html">启用高可用和数据持久化特征</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-overview-of-high-availability-in-greenplum-database.html">Greenplum数据库高可用性概述</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-overview-of-segment-mirroring.html">Segment镜像概述</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-overview-of-master-mirroring.html">Master镜像概述</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-mirroring-in-greenplum-database.html">在Greenplum数据库中启用镜像</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-segment-mirroring.html">启用Segment镜像</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-master-mirroring.html">启用Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-detecting-a-failed-segment.html">检测故障的Segment</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-checking-for-failed-segments.html">检测故障Segment</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-checking-the-log-files.html">检查日志文件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-recovering-a-failed-segment.html">恢复故障Segment</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-recovering-from-segment-failures.html">从Segment故障中恢复</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-when-a-segment-host-is-not-recoverable.html">当一台Segment主机不可恢复时</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-recovering-a-failed-master.html">恢复故障的Master</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-restoring-master-mirroring-after-a-recovery.html">在恢复后还原Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-main.html">备份和恢复数据库</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-overview.html">备份和恢复概述</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html">使用gpbackup和gprestore并行备份</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_vh5_1hd_tbb">需求和限制</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_x3s_lqj_tbb">备份或还原中包含的对象</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_qgj_b3d_tbb">执行基本备份和还原操作</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_et4_b5d_tbb">过滤备份或恢复的内容</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_qwd_d5d_tbb">配置邮件通知</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_xnj_b4c_tbb">理解备份文件</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup-incremental.html">使用gpbackup和gprestore创建增量备份</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup-incremental.html#topic_kvf_mkr_t2b">关于增量备份集</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup-incremental.html#topic_btr_xfr_t2b">使用增量备份</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-boostfs.html">将gpbackup和gprestore与BoostFS一起使用</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-boostfs.html#topic_zp4_mvv_bdb">安装BoostFS</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-boostfs.html#topic_t4z_tvv_bdb">使用BoostFS备份和恢复</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-plugins.html">使用gpbackup存储插件</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-s3-plugin.html">使用带有gpbackup和gprestore的S3存储插件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-plugin-api.html">备份&#x2F;恢复存储插件API（Beta版）</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/backup_data.html">backup_data</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/backup_file.html">backup_file</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/cleanup_plugin_for_backup.html">cleanup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/cleanup_plugin_for_restore.html">cleanup_plugin_for_restore</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/plugin_api_version.html">plugin_api_version</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/restore_data.html">restore_data</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/restore_file.html">restore_file</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/setup_plugin_for_backup.html">setup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/setup_plugin_for_restore.html">setup_plugin_for_restore</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-main.html">扩容Greenplum系统</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-overview.html">系统扩容概述</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-planning.html">规划Greenplum系统扩容</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-nodes.html">准备并增加节点</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-initialize.html">初始化新节点</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-redistribute.html">重分布表</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-rm-schema.html">移除扩容Schema</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/monitor.html">监控Greenplum系统</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/maintain.html">日常系统维护任务</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/monitoring/monitoring.html">Recommended Monitoring and Maintenance Tasks</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/partIII.html">管理Greenplum数据库访问</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/client_auth.html">配置客户端认证</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ldap.html">使用带TLS&#x2F;SSL的LDAP认证</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/kerberos.html">使用Kerberos认证</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/kerberos-lin-client.html">为Linux客户端进行Kerberos配置</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/kerberos-win-client.html">为Windows客户端进行Kerberos配置</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/roles_privs.html">管理角色与权限</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl.html">定义数据库对象</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-database.html">创建和管理数据库</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-tablespace.html">创建和管理表空间</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-schema.html">创建和管理SCHEMA</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-table.html">创建和管理表</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-storage.html">选择表存储模型</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-partition.html">对大型表分区</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-sequence.html">创建和使用序列</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-index.html">在Greenplum数据库中使用索引</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-view.html">创建和管理视图</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/distribution.html">分布与倾斜</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/dml.html">插入, 更新, 和删除数据 </a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query.html">查询数据</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/parallel-proc.html">关于Greenplum的查询处理</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-optimizer.html">关于GPORCA</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-overview.html">GPORCA概述</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-enable.html">启用和禁用GPORCA</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-root-partition.html">收集根分区统计信息</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-notes.html">使用GPORCA时的考虑</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-features.html">GPORCA特性和增强</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-changed.html">GPORCA改变的行为</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-limitations.html">GPORCA的限制</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-fallback.html">判断被使用的查询优化器</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-uniform-part-tbl.html">关于统一多级分区表</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/defining-queries.html">定义查询</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/CTE-query.html">WITH查询（公用表表达式）</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/functions-operators.html">使用函数和操作符</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/json-data.html">使用JSON数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/xml-data.html">使用XML数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/full-text-search.html">使用全文搜索</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/intro.html">关于全文搜索</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/tables-indexes.html">在数据库表中搜索文本</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/controlling.html">控制文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/features.html">文本搜索附加功能</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/parsers.html">文本搜索解析器</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/dictionaries.html">文本搜索词典</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/configuration.html">文本搜索配置示例</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/testing.html">测试和调试文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/gist-gin.html">文本搜索的GiST和GIN索引</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/psql-support.html">psql支持</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/limitations.html">限制</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-performance.html">查询性能</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/spill-files.html">管理查询生成的溢出文件</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-profiling.html">查询分析</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-working-with-file-based-ext-tables.html">使用外部数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-external-tables.html">定义外部表</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-file-protocol.html">file:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-gpfdist-protocol.html">gpfdist:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-gpfdists-protocol.html">gpfdists:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-pxf-protocol.html">pxf:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-s3-protocol.html">s3:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-accessing-ext-files-custom-protocol.html">使用自定义协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-handling-errors-ext-table-data.html">处理外部表数据中的错误</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-creating-and-using-web-external-tables.html">创建和使用外部Web表</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-creating-external-tables---examples.html">Examples for Creating External Tables</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-1-single-gpfdist-instance-on-single-nic-machine.html">Example 1—Single gpfdist instance on single-NIC machine</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-2-multiple-gpfdist-instances.html">Example 2—Multiple gpfdist instances </a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-3-multiple-gpfdists-instances.html">Example 3—Multiple gpfdists instances </a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-4-single-gpfdist-instance-with-error-logging.html">Example 4—Single gpfdist instance with error logging</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-5-text-format-on-a-hadoop-distributed-file-server.html">Example 5—TEXT Format on a Hadoop Distributed File Server</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-6-multiple-files-in-csv-format-with-header-rows.html">Example 6—Multiple files in CSV format with header rows</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-7-readable-web-external-table-with-script.html">Example 7—Readable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-8-writable-external-table-with-gpfdist.html">Example 8—Writable External Table with gpfdist</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-9-writable-external-web-table-with-script.html">Example 9—Writable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-10-readable-and-writable-external-tables-with-xml-transformations.html">Example 10—Readable and Writable External Tables with XML Transformations</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-foreign.html">使用外部表访问外部数据</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-devel-fdw.html">写一个外部数据的包装器</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-using-the-greenplum-parallel-file-server--gpfdist-.html">使用Greenplum的并行文件服务器（gpfdist）</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-and-unloading-data.html">装载和卸载数据</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-data-using-an-external-table.html">使用外部表装载数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-and-writing-non-hdfs-custom-data.html">装载和写入非HDFS自定义数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-using-a-custom-format.html">使用一种自定义格式</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-importing-and-exporting-fixed-width-data.html">导入和导出固定宽度的数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-examples-read-fixed-width-data.html">例子：读取宽度固定的数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-using-a-custom-protocol.html">使用一种自定协议</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-handling-load-errors.html">处理装载错误</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-define-an-external-table-with-single-row-error-isolation.html">定义一个带有单行错误隔离的外部表</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-create-an-error-table-and-declare-a-reject-limit.html">捕捉行格式化错误并且声明拒绝极限 </a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-viewing-bad-rows-in-the-error-table-or-error-log.html">在错误日志中查看不正确的行</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-moving-data-between-tables.html">在表之间移动数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-data-with-gpload.html">用gpload装载数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/transforming-xml-data.html">使用gpfdist和gpload转换外部数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-data-with-copy.html">用COPY装载数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-running-copy-in-single-row-error-isolation-mode.html">在单行错误隔离模式中运行COPY</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-optimizing-data-load-and-query-performance.html">优化数据装载和查询性能</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-unloading-data-from-greenplum-database.html">从Greenplum数据库卸载数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-defining-a-file-based-writable-external-table.html">定义基于文件的可写外部表</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-example-1-greenplum-file-server-gpfdist.html">例 1—Greenplum文件服务器（gpfdist）</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-example-2-hadoop-file-server.html">例 2—Hadoop文件系统(pxf)</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-defining-a-command-based-writable-external-web-table.html">定义基于命令的可写外部Web表</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-disabling-execute-for-web-or-writable-external-tables.html">为Web或者可写外部表禁用EXECUTE</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-unloading-data-using-a-writable-external-table.html">使用可写外部表卸载数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-unloading-data-using-copy.html">使用COPY卸载数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-formatting-data-files.html">格式化数据文件</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-formatting-rows.html">格式化行</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-formatting-columns.html">格式化列</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-representing-null-values.html">表示NULL值</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-escaping.html">转义</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-escaping-in-text-formatted-files.html">在文本格式的文件中转义</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-escaping-in-csv-formatted-files.html">在CSV格式的文件中转义</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-character-encoding.html">字符编码</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-example-custom-data-access-protocol.html">自定义数据访问协议实例 </a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-installing-the-external-table-protocol.html">安装外部表协议</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-gpextprotocal.c.html">gpextprotocal.c</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/partV.html">性能管理</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/perf_intro.html">管理性能</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/perf_issues.html">性能问题的常见原因</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/wlmgmt_intro.html">Greenplum数据库内存总览</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/wlmgmt.html">管理资源</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/workload_mgmt_resgroups.html">用资源组进行工作负载管理</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/workload_mgmt.html">使用资源队列</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/perf_troubleshoot.html">检修性能问题</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    使用函数和操作符
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        

    <h1 class="title topictitle1">使用函数和操作符</h1>

    
    <div class="body">
<p class="shortdesc">用户定义和内置函数和运算符的说明。</p>

        <ul class="ul">
            <li class="li" id="topic26__in140953">
                <a class="xref" href="#topic27">在Greenplum数据库中使用函数</a>
</li>

            <li class="li" id="topic26__in141620">
                <a class="xref" href="#topic28">用户定义的函数</a>
            </li>

            <li class="li" id="topic26__in141625">
                <a class="xref" href="#topic29">内建函数和操作符</a>
            </li>

            <li class="li" id="topic26__in184735">
                <a class="xref" href="#topic30">窗口函数</a>
            </li>

            <li class="li" id="topic26__in184739">
                <a class="xref" href="#topic31">高级聚集函数</a>
            </li>

        </ul>

    </div>

    <div class="related-links">
<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a class="link" href="../../query/topics/query.html" title="本主题提供在Greenplum数据库中使用SQL的信息。">查询数据</a>
</div>
</div>
</div>
<div class="topic nested1" xml:lang="en" lang="en" id="topic27">
        <h2 class="title topictitle2">在Greenplum数据库中使用函数</h2>

        <div class="body">
            <p class="p">在Greenplum数据库中调用函数时，函数属性控制函数的执行。易变性属性 (<samp class="ph codeph">IMMUTABLE</samp>,
                    <samp class="ph codeph">STABLE</samp>, <samp class="ph codeph">VOLATILE</samp>) 和<samp class="ph codeph">EXECUTE
                    ON</samp> 属性控制函数执行的两个不同方面。一般来说，易变性指示函数执行时间， <samp class="ph codeph">EXECUTE
                    ON</samp> 指示执行位置。易变性属性是基于PostgreSQL的属性, <samp class="ph codeph">EXECUTE ON</samp> 属性是Greenplum的属性。</p>

            <p class="p">例如，使用<samp class="ph codeph">IMMUTABLE</samp>属性定义的函数可以在查询计划时执行，而使用<samp class="ph codeph">VOLATILE</samp>属性定义的函数，必须对查询中每一行执行。
                使用<samp class="ph codeph">EXECUTE ON MASTER</samp>属性的函数仅在主实例上执行，而使用<samp class="ph codeph">EXECUTE ON ALL
                    SEGMENTS</samp>属性的函数在所有主segment实例（而不是主服务器）上执行。
                 </p>

            <p class="p">这些表总结了Greenplum数据库基于这些属性，对函数执行的假设。</p>

            
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic27__in201681" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">Table 1. Greenplum数据库的函数易变性</span></caption>
                    
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="17.073170731707318%" id="d82386e129">函数属性</th>

                            <th class="entry" valign="top" width="19.06873614190687%" id="d82386e132">Greenplum支持</th>

                            <th class="entry" valign="top" width="31.9290465631929%" id="d82386e135">描述</th>

                            <th class="entry" valign="top" width="31.9290465631929%" id="d82386e138">注释</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="17.073170731707318%" headers="d82386e129 ">IMMUTABLE</td>

                            <td class="entry" valign="top" width="19.06873614190687%" headers="d82386e132 ">支持</td>

                            <td class="entry" valign="top" width="31.9290465631929%" headers="d82386e135 ">仅直接依赖信息参数列表。如果给定相同的参数值，则始终返回同样的结果。</td>

                            <td class="entry" valign="top" width="31.9290465631929%" headers="d82386e138 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="17.073170731707318%" headers="d82386e129 ">STABLE</td>

                            <td class="entry" valign="top" width="19.06873614190687%" headers="d82386e132 ">大部分情况下支持</td>

                            <td class="entry" valign="top" width="31.9290465631929%" headers="d82386e135 ">在一个单一表扫描中，相同的参数值返回相同的结果，但是不同的SQL语句结果会改变。</td>

                            <td class="entry" valign="top" width="31.9290465631929%" headers="d82386e138 ">结果依赖于数据库查找或者参数值。<samp class="ph codeph">current_timestamp</samp>函数族是<samp class="ph codeph">STABLE</samp>的，在一次执行中值不会改变。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="17.073170731707318%" headers="d82386e129 ">VOLATILE</td>

                            <td class="entry" valign="top" width="19.06873614190687%" headers="d82386e132 ">受限</td>

                            <td class="entry" valign="top" width="31.9290465631929%" headers="d82386e135 ">在一个单一表扫描中函数值可能会改变。例如：<samp class="ph codeph">random()</samp>,
                                <samp class="ph codeph">timeofday()</samp>，这是默认属性。</td>

                            <td class="entry" valign="top" width="31.9290465631929%" headers="d82386e138 ">任何有副作用的函数都是volatile，即使它的结果是可预测的也一样。例如：<samp class="ph codeph">setval()</samp>。
                            </td>

                        </tr>

                    </tbody>

                </table>
</div>

            
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic27__table_cnz_4ng_gcb" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">Table 2. Greenplum数据库的EXECUTE ON函数属性 </span></caption>
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="21.095890410958905%" id="d82386e225">函数属性</th>

                            <th class="entry" valign="top" width="39.45205479452055%" id="d82386e228">描述</th>

                            <th class="entry" valign="top" width="39.45205479452055%" id="d82386e231">注释</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="21.095890410958905%" headers="d82386e225 ">EXECUTE ON ANY</td>

                            <td class="entry" valign="top" width="39.45205479452055%" headers="d82386e228 ">表示函数可以在master或任意segment实例上执行，并且返回相同的结果，而不管它在何处执行。这是默认属性。</td>

                            <td class="entry" valign="top" width="39.45205479452055%" headers="d82386e231 ">Greenplum数据库决定函数的执行位置。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="21.095890410958905%" headers="d82386e225 ">EXECUTE ON MASTER</td>

                            <td class="entry" valign="top" width="39.45205479452055%" headers="d82386e228 ">表示必须在master实例上执行函数。</td>

                            <td class="entry" valign="top" width="39.45205479452055%" headers="d82386e231 ">如果用户定义函数执行查询以访问表，请指定此属性。 </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="21.095890410958905%" headers="d82386e225 ">EXECUTE ON ALL SEGMENTS</td>

                            <td class="entry" valign="top" width="39.45205479452055%" headers="d82386e228 ">表示对于每个调用，函数必须在所有主segment实例上执行，而不是在master上执行。</td>

                            <td class="entry" valign="top" width="39.45205479452055%" headers="d82386e231 "> </td>

                        </tr>

                    </tbody>

                </table>
</div>

            <p class="p">您可以使用psql <samp class="ph codeph">\df+ <var class="keyword varname">function</var></samp>命令显示函数的易变性和<samp class="ph codeph">EXECUTE
                ON</samp>属性。</p>

            <p class="p">更多有关Greenplum数据库函数易变性分类的信息，请参考PostgreSQL文档<a class="xref" href="https://www.postgresql.org/docs/9.4/xfunc-volatility.html" target="_blank">函数易变性分类</a>
                </p>

            <p class="p">更多关于<samp class="ph codeph">EXECUTE ON</samp>属性的信息, 参看 <samp class="ph codeph"><a class="xref" href="../../../ref_guide/sql_commands/CREATE_FUNCTION.html#topic1">创建函数</a></samp>.</p>

            <p class="p">在Greenplum数据库中，数据被划分为多个段-每个段都是一个不同的PostgreSQL数据库。为了防止不一致或意外的结果，如果函数包含SQL命令或者任意修改数据库的方式，请不要在segment级别执行被分类为volatile的函数。
                例如，不允许对Greenplum数据库中的分布式数据<samp class="ph codeph">setval()</samp>等函数，因为它们可能导致段实例之间的数据不一致。</p>

            <p class="p">函数可以对segment上的复制表（<samp class="ph codeph">DISTRIBUTED REPLICATED</samp>）执行只读查询，但修改数据的任何SQL命令都必须在master实例上执行。 </p>

            <p class="p">为了确保数据的一致性，您可以在主服务器上安全地运行语句来调用使用<samp class="ph codeph">VOLATILE
            </samp>和<samp class="ph codeph">STABLE</samp>的函数。例如，下面的语句在master上运行（不带FROM子句的语句）：</p>

            <div class="p">
                <pre class="pre codeblock">SELECT setval('myseq', 201);
SELECT foo();</pre>

            </div>

            <p class="p">如果语句有一个包含分布式表的<samp class="ph codeph">FROM</samp>子句，而<samp class="ph codeph">FROM</samp>子句中的函数返回一组行，则该语句可以在以下segment上运行：</p>

            <div class="p">
                <pre class="pre codeblock">SELECT * from foo();</pre>

            </div>

            <p class="p">Greenplum数据库不支持返回表引用（<samp class="ph codeph">rangeFuncs</samp>）的函数或使用<samp class="ph codeph">refCursor</samp>数据类型的函数。</p>

        </div>

        <div class="topic nested2" xml:lang="en" lang="en" id="topic281">
            <h3 class="title topictitle3">函数易变性和计划缓冲</h3>

            <div class="body">
                <p class="p">对于计划和立即执行的简单交互式查询，<samp class="ph codeph">STABLE</samp>和<samp class="ph codeph">IMMUTABLE
                </samp>的函数易变性类别之间的差异相对较小。无论是在计划期间执行一次函数，还是在查询执行启动期执行一次函数，都无关紧要。
                    但是，当您保存计划并稍后重用它时，会有很大的不同。如果把一个函数误标为<samp class="ph codeph">IMMUTABLE
                    </samp>，Greenplum数据库可能在规划时会过早地把它折叠成一个常量，可能会在计划的后续执行期间重用过时的值。当使用 <samp class="ph codeph">PREPARE</samp>
                    语句或使用PL/pgSQL之类的语言缓存计划时，可能会遇到这种危险。</p>

            </div>

        </div>

    </div>

    <div class="topic nested1" xml:lang="en" lang="en" id="topic28">
        <h2 class="title topictitle2">用户定义的函数</h2>

        <div class="body">
            <p class="p">Greenplum数据库支持用户定义的函数。更多信息请见PostgreSQL文档中的 <a class="xref" href="https://www.postgresql.org/docs/9.4/extend.html" target="_blank">Extending SQL</a> </p>

            <p class="p">使用<samp class="ph codeph">CREATE FUNCTION</samp>语句注册用户定义的函数，它们可以按在<a class="xref" href="#topic27">在Greenplum数据库中使用函数</a>中所述的方式被使用。
                默认情况下，用户定义的函数被声明为<samp class="ph codeph">VOLATILE</samp>，因此如果用户定义的函数是<samp class="ph codeph">IMMUTABLE</samp>或者<samp class="ph codeph">STABLE</samp>，必须在注册该函数时指定正确的易变性级别。</p>

            <p class="p">默认情况下，用户定义的函数被声明为<samp class="ph codeph">EXECUTE ON
                ANY</samp>。只有当函数在master实例上执行时，才支持执行查询以访问表的函数，除非函数可以执行仅访问segment实例上复制表的<samp class="ph codeph">SELECT
            </samp>命令。访问散列分布表或随机分布表的函数必须用<samp class="ph codeph">EXECUTE ON MASTER</samp>属性定义。否则，在复杂的查询中使用函数时，函数可能返回不正确的结果。
                如果没有该属性，规划器优化可能会将函数调用推送到segment实例中执行。
               </p>

            <p class="p">在创建用户定义的函数时，避免使用致命错误或者破坏性的调用。Greenplum数据库可能会用突然的关闭或者重启来应对这些错误。</p>

            <p class="p">在Greenplum数据库中，用户定义的函数的共享库必须位于Greenplum数据库阵列的所有主机（Master、Segment以及镜像）上的同一库路径地址。</p>

            <p class="p">还可以创建并执行用Greenplum数据库过程语言（例如PL/pgSQL）编写的匿名代码块。匿名块作为短暂的匿名函数运行。有关创建和执行匿名块的信息，请见
 <a class="xref" href="../../../ref_guide/sql_commands/DO.html#topic1"><samp class="ph codeph">DO</samp></a>命令。</p>

        </div>

    </div>

    <div class="topic nested1" xml:lang="en" lang="en" id="topic29">
        <h2 class="title topictitle2">内建函数和操作符</h2>

        <div class="body">
            <p class="p"> 下面的表格列出了PostgreSQL支持的内建函数和操作符的分类。Greenplum数据库中支持PostgreSQL中所有的函数和操作符，除了<samp class="ph codeph">STABLE</samp>以及<samp class="ph codeph">VOLATILE</samp>函数之外，这两种服从在Greenplum数据库中使用函数中记录的限制
                <a class="xref" href="#topic27">在Greenplum数据库中使用函数</a>。
                更多有关这些内建函数和操作符的信息请见PostgreSQL文档中的 <a class="xref" href="https://www.postgresql.org/docs/9.4/functions.html" target="_blank">函数和操作符</a> 。
               </p>

            <p class="p">Greenplum数据库包括操作<samp class="ph codeph">json</samp>数据类型值的JSON处理函数。有关JSON数据的信息，请见使用JSON数据 <a class="xref" href="json-data.html#topic1" title="Greenplum数据库支持json和jsonb数据类型来存储JSON (JavaScript Object Notation)数据。">使用JSON数据</a>。</p>

            
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic29__in204913" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">Table 3. 内建函数和操作符</span></caption>
                    
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="27.62622585756499%" id="d82386e509">操作符/函数分类</th>

                            <th class="entry" valign="top" width="23.125347950837224%" id="d82386e512">VOLATILE函数</th>

                            <th class="entry" valign="top" width="30.833797267782963%" id="d82386e515">STABLE函数</th>

                            <th class="entry" valign="top" width="18.414628923814828%" id="d82386e518">限制</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-logical.html" target="_blank">逻辑操作符</a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-comparison.html" target="_blank">比较操作符</a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-math.html" target="_blank">
                                    <span class="ph">数学函数和操作符</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 ">random<p class="p">setseed</p>
</td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-string.html" target="_blank">
                                    <span class="ph">字符串函数和操作符</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 ">
                                <em class="ph i">所有内置转换操作符</em>
                            </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 ">convert<p class="p">pg_client_encoding</p>
</td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-binarystring.html" target="_blank">
                                    <span class="ph">二进制串函数和操作符</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-bitstring.html" target="_blank">
                                    <span class="ph">位串函数和操作符</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-matching.html" target="_blank">
                                    <span class="ph">模式匹配</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-formatting.html" target="_blank">
                                    <span class="ph">数据类型格式化函数</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 ">to_char<p class="p">to_timestamp</p>
</td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-datetime.html" target="_blank"> 日期/时间函数和操作符</a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 ">timeofday</td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 ">age<p class="p">current_date</p>
<p class="p">current_time</p>
<p class="p">current_timestamp</p>
<p class="p">localtime</p>
<p class="p">localtimestamp</p>
<p class="p">now</p>
</td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-enum.html" target="_blank">枚举支持函数  </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-geometry.html" target="_blank">
                                    <span class="ph">几何函数和操作符</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-net.html" target="_blank">
                                    <span class="ph">网络地址函数和操作符</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-sequence.html" target="_blank">
                                    <span class="ph">序列操纵函数</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 ">nextval()<p class="p">setval()</p>
</td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-conditional.html" target="_blank">
                                    <span class="ph">条件表达式</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-array.html" target="_blank">
                                    <span class="ph">数组函数和操作符</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 ">
                                <em class="ph i">所有数组函数</em>
                            </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-aggregate.html" target="_blank">
                                    <span class="ph">聚集函数</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-subquery.html" target="_blank">
                                    <span class="ph">子查询表达式</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-comparisons.html" target="_blank">
                                    <span class="ph">行及数组比较</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-srf.html" target="_blank">
                                    <span class="ph">集合返回函数</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 ">generate_series</td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 "> </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-info.html" target="_blank">
                                    <span class="ph">系统信息函数</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 ">
                                <em class="ph i">所有会话信息函数</em>
                                <p class="p">
                                    <em class="ph i">所有访问权限查询函数</em>
                                </p>
<p class="p">
                                    <em class="ph i">所有模式可见性查询函数</em>
                                </p>
<p class="p">
                                    <em class="ph i">所有系统目录信息函数</em>
                                </p>
<p class="p">
                                    <em class="ph i">所有注释信息函数</em>
                                </p>
<p class="p">
                                    <em class="ph i">所有事务ID和快照</em>
                                </p>
</td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.4/functions-admin.html" target="_blank">
                                    <span class="ph">系统管理函数</span>
                                </a>
                            </td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 ">set_config<p class="p">pg_cancel_backend</p>
<p class="p">pg_terminate_backend</p>
<p class="p">pg_reload_conf</p>
<p class="p">pg_rotate_logfile</p>
<p class="p">pg_start_backup</p>
<p class="p">pg_stop_backup</p>
<p class="p">pg_size_pretty</p>
<p class="p">pg_ls_dir</p>
<p class="p">pg_read_file</p>
<p class="p">pg_stat_file</p>
</td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 ">current_setting<p class="p"><em class="ph i">所有数据库对象大小
                                        函数</em></p>
</td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 ">
<strong class="ph b">Note:</strong>
                                    <samp class="ph codeph">pg_column_size</samp> 函数显示存储该值所需的字节，可能使用toast压缩。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="27.62622585756499%" headers="d82386e509 ">
                                <a class="xref" href="https://www.postgresql.org/docs/9.1/functions-xml.html" target="_blank">XML函数</a>和类似函数的表达式</td>

                            <td class="entry" valign="top" width="23.125347950837224%" headers="d82386e512 "> </td>

                            <td class="entry" valign="top" width="30.833797267782963%" headers="d82386e515 ">
                                <p class="p">cursor_to_xml(cursor refcursor, count int, nulls boolean,
                                    tableforest boolean, targetns text)</p>

                                <p class="p">cursor_to_xmlschema(cursor refcursor, nulls boolean, tableforest
                                    boolean, targetns text)</p>

                                <p class="p">database_to_xml(nulls boolean, tableforest boolean, targetns
                                    text)</p>

                                <p class="p">database_to_xmlschema(nulls boolean, tableforest boolean,
                                    targetns text)</p>

                                <p class="p">database_to_xml_and_xmlschema(nulls boolean, tableforest boolean,
                                    targetns text)</p>

                                <p class="p">query_to_xml(query text, nulls boolean, tableforest boolean,
                                    targetns text)</p>

                                <p class="p">query_to_xmlschema(query text, nulls boolean, tableforest
                                    boolean, targetns text)</p>

                                <p class="p">query_to_xml_and_xmlschema(query text, nulls boolean, tableforest
                                    boolean, targetns text)</p>

                                <p class="p">schema_to_xml(schema name, nulls boolean, tableforest boolean,
                                    targetns text)</p>

                                <p class="p">schema_to_xmlschema(schema name, nulls boolean, tableforest
                                    boolean, targetns text)</p>

                                <p class="p">schema_to_xml_and_xmlschema(schema name, nulls boolean,
                                    tableforest boolean, targetns text)</p>

                                <p class="p">table_to_xml(tbl regclass, nulls boolean, tableforest boolean,
                                    targetns text)</p>

                                <p class="p">table_to_xmlschema(tbl regclass, nulls boolean, tableforest
                                    boolean, targetns text)</p>

                                <p class="p">table_to_xml_and_xmlschema(tbl regclass, nulls boolean,
                                    tableforest boolean, targetns text)</p>

                                <p class="p">xmlagg(xml)</p>

                                <p class="p">xmlconcat(xml[, ...])</p>

                                <p class="p">xmlelement(name name [, xmlattributes(value [AS attname] [, ...
                                    ])] [, content, ...])</p>

                                <p class="p">xmlexists(text, xml)</p>

                                <p class="p">xmlforest(content [AS name] [, ...])</p>

                                <p class="p">xml_is_well_formed(text)</p>

                                <p class="p">xml_is_well_formed_document(text)</p>

                                <p class="p">xml_is_well_formed_content(text)</p>

                                <p class="p">xmlparse ( { DOCUMENT | CONTENT } value)</p>

                                <p class="p">xpath(text, xml)</p>

                                <p class="p">xpath(text, xml, text[])</p>

                                <p class="p">xpath_exists(text, xml)</p>

                                <p class="p">xpath_exists(text, xml, text[])</p>

                                <p class="p">xmlpi(name target [, content])</p>

                                <p class="p">xmlroot(xml, version text | no value [, standalone yes|no|no
                                    value])</p>

                                <p class="p">xmlserialize ( { DOCUMENT | CONTENT } value AS type )</p>

                                <p class="p">xml(text)</p>

                                <p class="p">text(xml)</p>

                                <p class="p">xmlcomment(xml)</p>

                                <p class="p">xmlconcat2(xml, xml)</p>

                            </td>

                            <td class="entry" valign="top" width="18.414628923814828%" headers="d82386e518 "> </td>

                        </tr>

                    </tbody>

                </table>
</div>

        </div>

    </div>

    <div class="topic nested1" xml:lang="en" lang="en" id="topic30">
        <h2 class="title topictitle2">窗口函数</h2>

        <div class="body">
            <p class="p">下列内建窗口函数是Greenplum对于PostgreSQL数据库的扩展。所有的窗口函数都是<em class="ph i">immutable</em>。更多有关窗口函数的信息，请见<a class="xref" href="defining-queries.html#topic13">窗口表达式</a>.</p>

            
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic30__in164369" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">Table 4. 窗口函数</span></caption>
                    
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="19.512303951096534%" id="d82386e1176">函数</th>

                            <th class="entry" valign="top" width="13.162885125939807%" id="d82386e1179">返回类型</th>

                            <th class="entry" valign="top" width="40.15795462151128%" id="d82386e1182">完整语法</th>

                            <th class="entry" valign="top" width="27.16685630145238%" id="d82386e1185">描述</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">cume_dist()</samp>
                            </td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">
                                <samp class="ph codeph">double precision</samp>
                            </td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">CUME_DIST() OVER ( [PARTITION BY </samp>
                                <span class="ph">expr</span>
                                <samp class="ph codeph">] ORDER BY </samp>
                                <span class="ph">expr</span>
                                <samp class="ph codeph"> )</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">计算一组值中一个值的累积分布。具有相等值的行总是具有相同的累积分布值。。
                             </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">dense_rank()</samp>
                            </td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">
                                <samp class="ph codeph">bigint</samp>
                            </td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">DENSE_RANK () OVER ( [PARTITION BY </samp>
                                <span class="ph">expr</span>
                                <samp class="ph codeph">] ORDER BY </samp>
                                <span class="ph">expr</span>
                                <samp class="ph codeph">)</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">计算一个有序行组中一行的无跳跃排名值的排名。具有相等值的行会得到相同的排名值。
                                </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">first_value(<em class="ph i">expr</em>)</samp>
                            </td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">same as input <span class="ph">expr</span> type</td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">FIRST_VALUE(</samp>
                                <span class="ph">expr</span>
                                <samp class="ph codeph">) OVER ( [PARTITION BY </samp>
                                <span class="ph">expr</span>
                                <samp class="ph codeph">] ORDER BY </samp>
                                <span class="ph">expr</span>
                                <samp class="ph codeph"> [ROWS|RANGE </samp>
                                <span class="ph">frame_expr</span>
                                <samp class="ph codeph">] )</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">返回一个有续值集合中的第一个值。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">lag(<em class="ph i">expr</em> [,<em class="ph i">offset</em>] [,<em class="ph i">default</em>])</samp>
                            </td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">same as input <em class="ph i">expr</em> type</td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">LAG(</samp>
                                <em class="ph i">expr</em>
                                <samp class="ph codeph"> [,</samp>
                                <em class="ph i">offset</em>
                                <samp class="ph codeph">] [,</samp>
                                <em class="ph i">default</em>
                                <samp class="ph codeph">]) OVER ( [PARTITION BY </samp>
                                <em class="ph i">expr</em>
                                <samp class="ph codeph">] ORDER BY </samp>
                                <em class="ph i">expr</em>
                                <samp class="ph codeph"> )</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">在不做自连接的情况下，提供对于同一个表中多于一行的访问。给定一个查询返回的一系列行以及该游标的一个位置，LAG提供对位于该位置之前一个给定物理偏移量的行的访问。默认的offset为1。
                                default设置当偏移量超出窗口范围之外时要返回的值。如果没有指定default，默认值是空值。
                               </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">last_value(<em class="ph i">expr</em></samp>)</td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">same as input <em class="ph i">expr</em> type</td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">LAST_VALUE(<em class="ph i">expr</em>) OVER ( [PARTITION BY <em class="ph i">expr</em>]
                                    ORDER BY <em class="ph i">expr</em> [ROWS|RANGE <em class="ph i">frame_expr</em>] )</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">返回一个有序值集合中的最后一个值。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">
                                    <samp class="ph codeph">lead(<em class="ph i">expr</em> [,<em class="ph i">offset</em>]
                                        [,<em class="ph i">default</em>])</samp>
                                </samp>
                            </td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">same as input <em class="ph i">expr</em> type</td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">LEAD(<em class="ph i">expr </em>[,<em class="ph i">offset</em>]
                                        [,<em class="ph i">expr</em><em class="ph i">default</em>]) OVER ( [PARTITION BY
                                        <em class="ph i">expr</em>] ORDER BY <em class="ph i">expr</em> )</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">
                                在不做自连接的情况下，提供对于同一个表中多于一行的访问。给定一个查询返回的一系列行以及该游标的一个位置，lead提供对位于该位置之后一个给定物理偏移量的行的访问。如果没有指定offset，默认偏移量是1。default设置当偏移量超出窗口范围之外时要返回的值。如果没有指定<em class="ph i">default</em>，默认值是空值。
                               </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">ntile(<em class="ph i">expr</em>)</samp>
                            </td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 "><samp class="ph codeph">bigint</samp></td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">NTILE(<em class="ph i">expr</em>) OVER ( [PARTITION BY <em class="ph i">expr</em>] ORDER
                                    BY <em class="ph i">expr</em> )</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">把一个有序数据集划分成一些桶（由<em class="ph i">expr</em>)定义）并且为每一行分配一个桶号。
                               </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 "><samp class="ph codeph">percent_rank()</samp></td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">
                                <samp class="ph codeph">double precision</samp>
                            </td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">PERCENT_RANK () OVER ( [PARTITION BY <em class="ph i">expr</em>] ORDER BY
                                        <em class="ph i">expr </em>)</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">计算一个假设行<samp class="ph codeph">R</samp>的排名减1，然后除以被计算的行数（在一个窗口分区内）减1。
                               </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 ">
                                <samp class="ph codeph">rank()</samp>
                            </td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 "><samp class="ph codeph">bigint</samp></td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">RANK () OVER ( [PARTITION BY <em class="ph i">expr</em>] ORDER BY <em class="ph i">expr
                                    </em>)</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">计算一行在一个有序值组中的排名。根据排名标准有相等值的行得到相同的排名。被占用的行数被加到排名数上来计算下一个排名值。在这种情况下，排名可能不是连续的数字。
                               </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="19.512303951096534%" headers="d82386e1176 "><samp class="ph codeph">row_number()</samp></td>

                            <td class="entry" valign="top" width="13.162885125939807%" headers="d82386e1179 ">
                                <samp class="ph codeph">bigint</samp>
                            </td>

                            <td class="entry" valign="top" width="40.15795462151128%" headers="d82386e1182 ">
                                <samp class="ph codeph">ROW_NUMBER () OVER ( [PARTITION BY <em class="ph i">expr</em>] ORDER BY
                                        <em class="ph i">expr </em>)</samp>
                            </td>

                            <td class="entry" valign="top" width="27.16685630145238%" headers="d82386e1185 ">为窗口分区中的每一行或者查询中的每一行分配一个唯一的编号。</td>

                        </tr>

                    </tbody>

                </table>
</div>

        </div>

    </div>

    <div class="topic nested1" xml:lang="en" lang="en" id="topic31">
        <h2 class="title topictitle2">高级聚集函数</h2>

        <div class="body">
            <div class="p">下列内建高级聚集函数是Greenplum对PostgreSQL数据库的扩展。这些函数都是<em class="ph i">immutable</em>。
                Greenplum数据库不支持PostgreSQL有序集聚合函数。
                <div class="note note">
<span class="notetitle">Note:</span> 用于分析的Greenplum MADlib扩展提供了额外的高级函数来执行对Greenplum数据库数据的统计分析和机器学习。
                    请见 <cite class="cite">Greenplum数据库参考指南</cite>中的
                    <a class="xref" href="../../../ref_guide/extensions/madlib.html#topic1">Greenplum的MADlib分析扩展</a>。</div>
</div>

            
<div class="tablenoborder">
<table cellpadding="4" cellspacing="0" summary="" id="topic31__in2073121" class="table" frame="border" border="1" rules="all">
<caption><span class="tablecap">Table 5. 高级聚集函数</span></caption>
                    
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="20.845288240441164%" id="d82386e1646">函数</th>

                            <th class="entry" valign="top" width="12.005779052967869%" id="d82386e1649">返回类型</th>

                            <th class="entry" valign="top" width="41.10249679506745%" id="d82386e1652">完整语法</th>

                            <th class="entry" valign="top" width="26.046435911523513%" id="d82386e1655">描述</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="20.845288240441164%" headers="d82386e1646 ">
                                <samp class="ph codeph">MEDIAN (<em class="ph i">expr</em>)</samp>
                            </td>

                            <td class="entry" valign="top" width="12.005779052967869%" headers="d82386e1649 ">
                                <samp class="ph codeph">timestamp, timestamptz, interval, float</samp>
                            </td>

                            <td class="entry" valign="top" width="41.10249679506745%" headers="d82386e1652 ">
                                <samp class="ph codeph">MEDIAN (<em class="ph i">expression</em>)</samp>
                                <p class="p">
                                    <em class="ph i">例子：</em>
                                </p>

                                <pre class="pre codeblock">SELECT department_id, MEDIAN(salary) 
FROM employees 
GROUP BY department_id; </pre>

                            </td>

                            <td class="entry" valign="top" width="26.046435911523513%" headers="d82386e1655 ">可以用一个二维数组作为输入。把这些数组当作矩阵。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="20.845288240441164%" headers="d82386e1646 ">
                                <samp class="ph codeph">sum(array[])</samp>
                            </td>

                            <td class="entry" valign="top" width="12.005779052967869%" headers="d82386e1649 ">
                                <samp class="ph codeph">smallint[]int[], bigint[], float[]</samp>
                            </td>

                            <td class="entry" valign="top" width="41.10249679506745%" headers="d82386e1652 ">
                                <samp class="ph codeph">sum(array[[1,2],[3,4]])</samp>
                                <p class="p">
                                    <em class="ph i">例子：</em>
                                </p>

                                <pre class="pre codeblock">CREATE TABLE mymatrix (myvalue int[]);
INSERT INTO mymatrix VALUES (array[[1,2],[3,4]]);
INSERT INTO mymatrix VALUES (array[[0,1],[1,0]]);
SELECT sum(myvalue) FROM mymatrix;
 sum 
---------------
 {{1,3},{4,4}}</pre>

                            </td>

                            <td class="entry" valign="top" width="26.046435911523513%" headers="d82386e1655 ">执行矩阵求和。可以将被视为矩阵的二维数组作为输入。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="20.845288240441164%" headers="d82386e1646 ">
                                <samp class="ph codeph">pivot_sum (label[], label, expr)</samp>
                            </td>

                            <td class="entry" valign="top" width="12.005779052967869%" headers="d82386e1649 ">
                                <samp class="ph codeph">int[], bigint[], float[]</samp>
                            </td>

                            <td class="entry" valign="top" width="41.10249679506745%" headers="d82386e1652 ">
                                <samp class="ph codeph">pivot_sum( array['A1','A2'], attr, value)</samp>
                            </td>

                            <td class="entry" valign="top" width="26.046435911523513%" headers="d82386e1655 ">使用sum来解决重复项的pivot聚集。</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="20.845288240441164%" headers="d82386e1646 ">
                                <samp class="ph codeph">unnest (array[])</samp>
                            </td>

                            <td class="entry" valign="top" width="12.005779052967869%" headers="d82386e1649 ">
<samp class="ph codeph">anyelement</samp>集合</td>

                            <td class="entry" valign="top" width="41.10249679506745%" headers="d82386e1652 ">
                                <samp class="ph codeph">unnest( array['one', 'row', 'per', 'item'])</samp>
                            </td>

                            <td class="entry" valign="top" width="26.046435911523513%" headers="d82386e1655 ">把一个一维数组转换成行。返回一个anyelement（一种多态伪类型，请见PostgreSQL中的伪类型）集合。<a class="xref" href="https://www.postgresql.org/docs/9.4/datatype-pseudo.html" target="_blank"><span class="ph">pseudo-type</span></a> </td>

                        </tr>

                    </tbody>

                </table>
</div>

        </div>

    </div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
