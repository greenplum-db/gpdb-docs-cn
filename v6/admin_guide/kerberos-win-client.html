<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      为Windows客户端进行Kerberos配置 |
    Greenplum Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/gpdb-docs-cn/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/gpdb-docs-cn/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/gpdb-docs-cn/images/favicon.ico' rel='shortcut icon'>

  <script src="/gpdb-docs-cn/javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_admin_guide x6-0_admin_guide_kerberos-win-client has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "greenplum.org";
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="/">Greenplum Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to Greenplum Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/../../gpdb-docs-cn/v6/homenav.html">Greenplum数据库® 6.0文档</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/admin_guide.html">管理员指南</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/partI.html">Greenplum数据库概念</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/arch_overview.html">关于Greenplum的架构</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_utilities.html">关于管理和监控工具</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_mvcc.html">关于Greenplum数据库中的并发控制</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/mvcc_example.html">管理事务ID的例子</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_loading.html">关于并行数据装载</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_ha.html">关于Greenplum数据库中的冗余和故障切换</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/intro/about_statistics.html">关于Greenplum数据库中的数据库统计信息</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/partII.html">管理一个Greenplum系统</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/versioning.html">关于Greenplum数据库发布版本号</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/startstop.html">启动和停止Greenplum数据库</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-accessing-the-database.html">访问数据库</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-establishing-a-database-session.html">建立一个数据库会话</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-supported-client-applications.html">支持的客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-greenplum-database-client-applications.html">Greenplum数据库客户端应用</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-connecting-with-psql.html">用psql连接</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/pgbouncer.html">使用PgBouncer连接池</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-database-application-interfaces.html">数据库应用接口</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/access_db/topics/g-troubleshooting-connection-problems.html">连接问题的发现及解决</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-configuring-the-greenplum-system.html">配置Greenplum数据库系统</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-about-greenplum-master-and-local-parameters.html">关于Greenplum数据库的Master参数和本地参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-configuration-parameters.html">设置配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-a-local-configuration-parameter.html">设置本地配置参数</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-a-master-configuration-parameter.html">设置Master配置参数</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-at-the-system-level.html">设置系统级别参数</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-at-the-database-level.html">设置数据库级别参数</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-at-the-role-level.html">设置角色级别参数</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-setting-parameters-in-a-session.html">设置会话级别参数</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-viewing-server-configuration-parameter-settings.html">查看服务器配置参数设置</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/topics/g-configuration-parameter-categories.html">配置参数种类</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/compression.html">启用压缩</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-high-availability-features.html">启用高可用和数据持久化特征</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-overview-of-high-availability-in-greenplum-database.html">Greenplum数据库高可用性概述</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-overview-of-segment-mirroring.html">Segment镜像概述</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-overview-of-master-mirroring.html">Master镜像概述</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-mirroring-in-greenplum-database.html">在Greenplum数据库中启用镜像</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-segment-mirroring.html">启用Segment镜像</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-enabling-master-mirroring.html">启用Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-detecting-a-failed-segment.html">检测故障的Segment</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-checking-for-failed-segments.html">检测故障Segment</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-checking-the-log-files.html">检查日志文件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-recovering-a-failed-segment.html">恢复故障Segment</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-recovering-from-segment-failures.html">从Segment故障中恢复</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-when-a-segment-host-is-not-recoverable.html">当一台Segment主机不可恢复时</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-recovering-a-failed-master.html">恢复故障的Master</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/highavail/topics/g-restoring-master-mirroring-after-a-recovery.html">在恢复后还原Master镜像</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-main.html">备份和恢复数据库</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-overview.html">备份和恢复概述</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html">使用gpbackup和gprestore并行备份</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_vh5_1hd_tbb">需求和限制</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_x3s_lqj_tbb">备份或还原中包含的对象</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_qgj_b3d_tbb">执行基本备份和还原操作</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_et4_b5d_tbb">过滤备份或恢复的内容</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_qwd_d5d_tbb">配置邮件通知</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup.html#topic_xnj_b4c_tbb">理解备份文件</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup-incremental.html">使用gpbackup和gprestore创建增量备份</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup-incremental.html#topic_kvf_mkr_t2b">关于增量备份集</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-gpbackup-incremental.html#topic_btr_xfr_t2b">使用增量备份</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-boostfs.html">将gpbackup和gprestore与BoostFS一起使用</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-boostfs.html#topic_zp4_mvv_bdb">安装BoostFS</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-boostfs.html#topic_t4z_tvv_bdb">使用BoostFS备份和恢复</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-plugins.html">使用gpbackup存储插件</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-s3-plugin.html">使用带有gpbackup和gprestore的S3存储插件</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/backup-plugin-api.html">备份&#x2F;恢复存储插件API（Beta版）</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/backup_data.html">backup_data</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/backup_file.html">backup_file</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/cleanup_plugin_for_backup.html">cleanup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/cleanup_plugin_for_restore.html">cleanup_plugin_for_restore</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/plugin_api_version.html">plugin_api_version</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/restore_data.html">restore_data</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/restore_file.html">restore_file</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/setup_plugin_for_backup.html">setup_plugin_for_backup</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/plugin_api/setup_plugin_for_restore.html">setup_plugin_for_restore</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-main.html">扩容Greenplum系统</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-overview.html">系统扩容概述</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-planning.html">规划Greenplum系统扩容</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-nodes.html">准备并增加节点</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-initialize.html">初始化新节点</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-redistribute.html">重分布表</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/expand/expand-rm-schema.html">移除扩容Schema</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/monitor.html">监控Greenplum系统</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/managing/maintain.html">日常系统维护任务</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/monitoring/monitoring.html">Recommended Monitoring and Maintenance Tasks</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/partIII.html">管理Greenplum数据库访问</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/client_auth.html">配置客户端认证</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ldap.html">使用带TLS&#x2F;SSL的LDAP认证</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/kerberos.html">使用Kerberos认证</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/kerberos-lin-client.html">为Linux客户端进行Kerberos配置</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/kerberos-win-client.html">为Windows客户端进行Kerberos配置</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/roles_privs.html">管理角色与权限</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl.html">定义数据库对象</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-database.html">创建和管理数据库</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-tablespace.html">创建和管理表空间</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-schema.html">创建和管理SCHEMA</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-table.html">创建和管理表</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-storage.html">选择表存储模型</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-partition.html">对大型表分区</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-sequence.html">创建和使用序列</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-index.html">在Greenplum数据库中使用索引</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/ddl/ddl-view.html">创建和管理视图</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/distribution.html">分布与倾斜</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/dml.html">插入, 更新, 和删除数据 </a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query.html">查询数据</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/parallel-proc.html">关于Greenplum的查询处理</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-optimizer.html">关于GPORCA</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-overview.html">GPORCA概述</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-enable.html">启用和禁用GPORCA</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-root-partition.html">收集根分区统计信息</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-notes.html">使用GPORCA时的考虑</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-features.html">GPORCA特性和增强</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-changed.html">GPORCA改变的行为</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-limitations.html">GPORCA的限制</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-opt-fallback.html">判断被使用的查询优化器</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-piv-uniform-part-tbl.html">关于统一多级分区表</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/defining-queries.html">定义查询</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/CTE-query.html">WITH查询（公用表表达式）</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/functions-operators.html">使用函数和操作符</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/json-data.html">使用JSON数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/xml-data.html">使用XML数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/full-text-search.html">使用全文搜索</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/intro.html">关于全文搜索</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/tables-indexes.html">在数据库表中搜索文本</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/controlling.html">控制文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/features.html">文本搜索附加功能</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/parsers.html">文本搜索解析器</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/dictionaries.html">文本搜索词典</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/configuration.html">文本搜索配置示例</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/testing.html">测试和调试文本搜索</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/gist-gin.html">文本搜索的GiST和GIN索引</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/psql-support.html">psql支持</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/textsearch/limitations.html">限制</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-performance.html">查询性能</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/spill-files.html">管理查询生成的溢出文件</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/query/topics/query-profiling.html">查询分析</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-working-with-file-based-ext-tables.html">使用外部数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-external-tables.html">定义外部表</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-file-protocol.html">file:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-gpfdist-protocol.html">gpfdist:&#x2F;&#x2F;协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-gpfdists-protocol.html">gpfdists:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-pxf-protocol.html">pxf:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-s3-protocol.html">s3:&#x2F;&#x2F; 协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-accessing-ext-files-custom-protocol.html">使用自定义协议</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-handling-errors-ext-table-data.html">处理外部表数据中的错误</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-creating-and-using-web-external-tables.html">创建和使用外部Web表</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-creating-external-tables---examples.html">Examples for Creating External Tables</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-1-single-gpfdist-instance-on-single-nic-machine.html">Example 1—Single gpfdist instance on single-NIC machine</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-2-multiple-gpfdist-instances.html">Example 2—Multiple gpfdist instances </a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-3-multiple-gpfdists-instances.html">Example 3—Multiple gpfdists instances </a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-4-single-gpfdist-instance-with-error-logging.html">Example 4—Single gpfdist instance with error logging</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-5-text-format-on-a-hadoop-distributed-file-server.html">Example 5—TEXT Format on a Hadoop Distributed File Server</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-6-multiple-files-in-csv-format-with-header-rows.html">Example 6—Multiple files in CSV format with header rows</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-7-readable-web-external-table-with-script.html">Example 7—Readable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-8-writable-external-table-with-gpfdist.html">Example 8—Writable External Table with gpfdist</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-9-writable-external-web-table-with-script.html">Example 9—Writable External Web Table with Script</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-example-10-readable-and-writable-external-tables-with-xml-transformations.html">Example 10—Readable and Writable External Tables with XML Transformations</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-foreign.html">使用外部表访问外部数据</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-devel-fdw.html">写一个外部数据的包装器</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/g-using-the-greenplum-parallel-file-server--gpfdist-.html">使用Greenplum的并行文件服务器（gpfdist）</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-and-unloading-data.html">装载和卸载数据</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-data-using-an-external-table.html">使用外部表装载数据</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-and-writing-non-hdfs-custom-data.html">装载和写入非HDFS自定义数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-using-a-custom-format.html">使用一种自定义格式</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-importing-and-exporting-fixed-width-data.html">导入和导出固定宽度的数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-examples-read-fixed-width-data.html">例子：读取宽度固定的数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-using-a-custom-protocol.html">使用一种自定协议</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-handling-load-errors.html">处理装载错误</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-define-an-external-table-with-single-row-error-isolation.html">定义一个带有单行错误隔离的外部表</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-create-an-error-table-and-declare-a-reject-limit.html">捕捉行格式化错误并且声明拒绝极限 </a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-viewing-bad-rows-in-the-error-table-or-error-log.html">在错误日志中查看不正确的行</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-moving-data-between-tables.html">在表之间移动数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-data-with-gpload.html">用gpload装载数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/external/pxf-overview.html">使用PXF访问外部数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/transforming-xml-data.html">使用gpfdist和gpload转换外部数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-loading-data-with-copy.html">用COPY装载数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-running-copy-in-single-row-error-isolation-mode.html">在单行错误隔离模式中运行COPY</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-optimizing-data-load-and-query-performance.html">优化数据装载和查询性能</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-unloading-data-from-greenplum-database.html">从Greenplum数据库卸载数据</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-defining-a-file-based-writable-external-table.html">定义基于文件的可写外部表</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-example-1-greenplum-file-server-gpfdist.html">例 1—Greenplum文件服务器（gpfdist）</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-example-2-hadoop-file-server.html">例 2—Hadoop文件系统(pxf)</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-defining-a-command-based-writable-external-web-table.html">定义基于命令的可写外部Web表</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-disabling-execute-for-web-or-writable-external-tables.html">为Web或者可写外部表禁用EXECUTE</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-unloading-data-using-a-writable-external-table.html">使用可写外部表卸载数据</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-unloading-data-using-copy.html">使用COPY卸载数据</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-formatting-data-files.html">格式化数据文件</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-formatting-rows.html">格式化行</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-formatting-columns.html">格式化列</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-representing-null-values.html">表示NULL值</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-escaping.html">转义</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-escaping-in-text-formatted-files.html">在文本格式的文件中转义</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-escaping-in-csv-formatted-files.html">在CSV格式的文件中转义</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-character-encoding.html">字符编码</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-example-custom-data-access-protocol.html">自定义数据访问协议实例 </a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-installing-the-external-table-protocol.html">安装外部表协议</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/load/topics/g-gpextprotocal.c.html">gpextprotocal.c</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/partV.html">性能管理</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/perf_intro.html">管理性能</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/perf_issues.html">性能问题的常见原因</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/wlmgmt_intro.html">Greenplum数据库内存总览</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/admin_guide/wlmgmt.html">管理资源</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/workload_mgmt_resgroups.html">用资源组进行工作负载管理</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/workload_mgmt.html">使用资源队列</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/admin_guide/perf_troubleshoot.html">检修性能问题</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    为Windows客户端进行Kerberos配置
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        

  <h1 class="title topictitle1">为Windows客户端进行Kerberos配置</h1>

  
  <div class="body">
<p class="shortdesc">您可以配置微软的Windows客户端应用程序来连接一个已配置Kerberos认证的Greenplum数据库系统。</p>

    <ul class="ul" id="topic1__ul_pbc_mxz_pw">
      <li class="li"><a class="xref" href="#topic_vjg_d5m_sv">在Windows上为Greenplum数据库客户端配置Kerberos</a></li>

      <li class="li"><a class="xref" href="#topic_uzb_t5m_sv">使用活动目录配置客户端身份认证</a></li>

    </ul>

    <p class="p">有关在Greenplum数据库中启用Kerberos认证的信息，参阅<a class="xref" href="kerberos.html#topic1" title="您可以使用Kerberos认证服务器控制对Greenplum数据库的访问。">使用Kerberos认证</a>。</p>

  </div>

  <div class="related-links">
<div class="familylinks">
<div class="parentlink">
<strong>Parent topic:</strong> <a class="link" href="client_auth.html" title="本主题讲解如何为Greenplum数据库配置客户端访问和身份验证。">配置客户端认证</a>
</div>
</div>
</div>
<div class="topic nested1" id="topic_vjg_d5m_sv">
    <h2 class="title topictitle2">在Windows上为Greenplum数据库客户端配置Kerberos</h2>

    <div class="body">
		<p class="p">当一个Greenplum数据库系统被配置为启用Kerberos作认证后，您可以为微软Windows系统上的Greenplum数据库客户端工具<samp class="ph codeph">gpload</samp>和<samp class="ph codeph">psql</samp>配置Kerberos认证。
        Greenplum数据库直接使用Kerberos认证，而不使用微软的活动目录（AD）。</p>

      <p class="p">本节包含以下信息。</p>

      <div class="p">
        <ul class="ul" id="topic_vjg_d5m_sv__ul_ask_2r1_cw">
          <li class="li">
<a class="xref" href="#topic_vjg_d5m_sv__win_kerberos_install">在Windows系统上安装Kerberos</a>.</li>

          <li class="li"><a class="xref" href="#topic_vjg_d5m_sv__win_psql_kerb">运行psql工具</a></li>

          <li class="li"><a class="xref" href="#topic_vjg_d5m_sv__win_gpload_kerb">gpload示例YAML文件</a></li>

          <li class="li"><a class="xref" href="#topic_vjg_d5m_sv__win_keytab">创建一个Kerberos的密钥表文件</a></li>

          <li class="li"><a class="xref" href="#topic_vjg_d5m_sv__win_kerberos_issues">问题及可能的解决方案</a></li>

        </ul>

      </div>

      <p class="p">这些主题假设Greenplum数据库系统已经被配置为启用Kerberos和微软的活动目录认证。参阅<a class="xref" href="#topic_uzb_t5m_sv">使用活动目录配置客户端身份认证</a>。</p>

      <div class="section" id="topic_vjg_d5m_sv__win_kerberos_install">
<h3 class="title sectiontitle">在Windows系统上安装Kerberos</h3>
        
        <p class="p">要对Windows系统上的Greenplum数据库客户端使用Kerberos认证，该系统上必须安装MIT Kerberos Windows客户端。
        可以从<a class="xref" href="http://web.mit.edu/kerberos/dist/index.html" target="_blank">http://web.mit.edu/kerberos/dist/index.html</a>下载安装MIT Kerberos for Windows 4.0.1 (for krb5)。</p>

        <p class="p">在Windows系统上，可以使用Kerberos的<samp class="ph codeph">kinit</samp>工具管理Kerberos的票据。</p>

        <p class="p">Kerberos服务没有被设置为自启动。该服务不能被用来认证Greenplum数据库。</p>

        <p class="p">从Greenplum数据库master主机拷贝<samp class="ph codeph">/etc/krb5.conf</samp>，并放置到Windows系统Kerberos默认路径<samp class="ph codeph">C:\ProgramData\MIT\Kerberos5\krb5.ini</samp>。
        在文件的<samp class="ph codeph">[libdefaults]</samp>部分，移除Kerberos的票据缓冲的位置<samp class="ph codeph">default_ccache_name</samp>。</p>

        <p class="p">在Windows系统上，使用环境变量<samp class="ph codeph">KRB5CCNAME</samp>指定Kerberos票据的位置。环境变量的值是一个文件而不是目录，并且它应该对服务器上的每个登录都是唯一的。</p>

        <p class="p">如下示例是配置文件，其中<samp class="ph codeph">default_ccache_name</samp>被移除，
        <samp class="ph codeph">[logging]</samp>部分也被移除。</p>

        <pre class="pre codeblock">[libdefaults]
 debug = true
 default_etypes = aes256-cts-hmac-sha1-96
 default_realm = EXAMPLE.LOCAL
 dns_lookup_realm = false
 dns_lookup_kdc = false
 ticket_lifetime = 24h
 renew_lifetime = 7d
 forwardable = true

[realms]
 EXAMPLE.LOCAL = {
  kdc =bocdc.example.local
  admin_server = bocdc.example.local
 }

[domain_realm]
 .example.local = EXAMPLE.LOCAL
 example.local = EXAMPLE.LOCAL</pre>

        <p class="p">使用<samp class="ph codeph">KRB5CCNAME</samp>指定Kerberos票据时，
        可以在一个本地用户环境或者一个会话中指定该值。
        如下命令设置<samp class="ph codeph">KRB5CCNAME</samp>，然后运行<samp class="ph codeph">kinit</samp>，
        并且运行批处理文件来为Greenplum数据库的客户端设置环境变量。</p>

        <pre class="pre codeblock">set KRB5CCNAME=%USERPROFILE%\krb5cache
kinit

"c:\Program Files (x86)\Greenplum\greenplum-clients-&lt;version&gt;\greenplum_clients_path.bat"</pre>

      </div>

      <div class="section" id="topic_vjg_d5m_sv__win_psql_kerb">
<h3 class="title sectiontitle">运行psql工具</h3>
        
        <p class="p">在Windows系统上安装并且配置Kerberos及其票据之后，
          可以运行Greenplum数据库的命令行客户端<samp class="ph codeph">psql</samp>。</p>

        <p class="p">如果得到警告指出控制台代码页与Windows代码页不同，
          可以运行Windows工具<samp class="ph codeph">chcp</samp>来改变代码页。
          如下示例展示了该警告及修正方法。</p>

        <pre class="pre codeblock">psql -h prod1.example.local warehouse
psql (9.4.20)
WARNING: Console code page (850) differs from Windows code page (1252)
 8-bit characters might not work correctly. See psql reference
 page "Notes for Windows users" for details.
Type "help" for help.

warehouse=# \q

chcp 1252
Active code page: 1252

psql -h prod1.example.local warehouse
psql (9.4.20)
Type "help" for help.</pre>

      </div>

      <div class="section" id="topic_vjg_d5m_sv__win_keytab">
<h3 class="title sectiontitle">创建一个Kerberos的密钥表文件</h3>
        
        <div class="p">在连接到Greenplum数据库系统时，可以创建并使用一个Kerberos的<samp class="ph codeph">keytab</samp>文件来避免在命令行输入密码或者在脚本文件中列出密码。
        可以用这些工具创建密钥表文件：<ul class="ul" id="topic_vjg_d5m_sv__ul_q5z_js4_cw">
            <li class="li">Windows Kerberos工具<samp class="ph codeph">ktpass</samp>
</li>

            <li class="li">Java JRE密钥表工具<samp class="ph codeph">ktab</samp><p class="p">如果使用AES256-CTS-HMAC-SHA1-96加密，
            需要从Oracle下载并安装Java扩展<cite class="cite">Java
                  Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files for
                  JDK/JRE</cite>。该命令创建密钥表文件
                  <samp class="ph codeph">svcPostgresProd1.keytab</samp>。</p>
</li>

          </ul>
</div>

        <p class="p">作为一个AD域管理员运行<samp class="ph codeph">ktpass</samp>工具。
        该工具需要一个包含服务主体名称（SPN）的用户账户作为AD用户属性的，该参数不是必需的。
        可以设置它作为<samp class="ph codeph">ktpass</samp>的一个参数并忽略未设置的警告。</p>

        <p class="p">Java JRE的<samp class="ph codeph">ktab</samp>工具需要AD域名管理员，不需要SPN。</p>

        <div class="note note">
<span class="notetitle">Note:</span> 输入密码以创建密钥表文件时，屏幕上会显示密码。</div>

        <p class="p">该示例运行<samp class="ph codeph">ktpass</samp>工具创建密钥表
            <samp class="ph codeph">dev1.keytab</samp>。</p>

        <pre class="pre codeblock">ktpass -out dev1.keytab -princ dev1@EXAMPLE.LOCAL -mapUser dev1 -pass <var class="keyword varname">your_password</var> -crypto all -ptype KRB5_NT_PRINCIPAL</pre>

        <p class="p">尽管有警告信息<samp class="ph codeph">Unable to set SPN mapping data</samp>仍然可用。</p>

        <p class="p">该示例运行Java<samp class="ph codeph">ktab.exe</samp>创建密钥表文件（<samp class="ph codeph">-a</samp>选项）并列出密钥表名称和条目（<samp class="ph codeph">-l</samp>
          <samp class="ph codeph">-e</samp>
          <samp class="ph codeph">-t</samp>选项）。</p>

        <pre class="pre codeblock">C:\Users\dev1&gt;"\Program Files\Java\jre1.8.0_77\bin"\ktab -a dev1
Password for dev1@EXAMPLE.LOCAL:<var class="keyword varname">your_password</var>
Done!
Service key for dev1 is saved in C:\Users\dev1\krb5.keytab

C:\Users\dev1&gt;"\Program Files\Java\jre1.8.0_77\bin"\ktab -l -e -t
Keytab name: C:\Users\dev1\krb5.keytab
KVNO Timestamp Principal
---- -------------- ------------------------------------------------------
 4 13/04/16 19:14 dev1@EXAMPLE.LOCAL (18:AES256 CTS mode with HMAC SHA1-96)
 4 13/04/16 19:14 dev1@EXAMPLE.LOCAL (17:AES128 CTS mode with HMAC SHA1-96)
 4 13/04/16 19:14 dev1@EXAMPLE.LOCAL (16:DES3 CBC mode with SHA1-KD)
 4 13/04/16 19:14 dev1@EXAMPLE.LOCAL (23:RC4 with HMAC)</pre>

        <p class="p">然后，您可以使用该密钥表：</p>

        <pre class="pre codeblock">kinit -kt dev1.keytab dev1
or
kinit -kt %USERPROFILE%\krb5.keytab dev1</pre>

      </div>

      <div class="section" id="topic_vjg_d5m_sv__win_gpload_kerb">
<h3 class="title sectiontitle">gpload示例YAML文件</h3>
        
        <p class="p">该示例以<samp class="ph codeph">dev1</samp>用户身份，运行<samp class="ph codeph">gpload</samp>任务，用户通过AD域登录到Windows桌面。</p>

        <p class="p">示例中的<samp class="ph codeph">test.yaml</samp>控制文件，其<samp class="ph codeph">USER:</samp>行已经被移除。使用了Kerberos认证</p>

        <pre class="pre codeblock">---
VERSION: 1.0.0.1
DATABASE: warehouse
HOST: prod1.example.local
PORT: 5432

GPLOAD:
   INPUT:
    - SOURCE:
         PORT_RANGE: [18080,18080]
         FILE:
           - /Users/dev1/Downloads/test.csv
    - FORMAT: text
    - DELIMITER: ','
    - QUOTE: '"'
    - ERROR_LIMIT: 25
    - LOG_ERRORS: true
   OUTPUT:
    - TABLE: public.test
    - MODE: INSERT
   PRELOAD:
    - REUSE_TABLES: true</pre>

        <p class="p">如下命令运行<samp class="ph codeph">kinit</samp>，然后用<samp class="ph codeph">test.yaml</samp>文件运行<samp class="ph codeph">gpload</samp>，并成功显示<samp class="ph codeph">gpload</samp>输出信息。</p>

        <pre class="pre codeblock">kinit -kt %USERPROFILE%\krb5.keytab dev1

gpload.py -f test.yaml
2016-04-10 16:54:12|INFO|gpload session started 2016-04-10 16:54:12
2016-04-10 16:54:12|INFO|started gpfdist -p 18080 -P 18080 -f "/Users/dev1/Downloads/test.csv" -t 30
2016-04-10 16:54:13|INFO|running time: 0.23 seconds
2016-04-10 16:54:13|INFO|rows Inserted = 3
2016-04-10 16:54:13|INFO|rows Updated = 0
2016-04-10 16:54:13|INFO|data formatting errors = 0
2016-04-10 16:54:13|INFO|gpload succeeded</pre>

      </div>

      <div class="section" id="topic_vjg_d5m_sv__win_kerberos_issues">
<h3 class="title sectiontitle">问题及可能的解决方案</h3>
        
        <ul class="ul" id="topic_vjg_d5m_sv__ul_tkb_hds_wv">
          <li class="li">这个消息表示Kerberos无法找到缓冲文件：
            <pre class="pre codeblock">Credentials cache I/O operation failed XXX
(Kerberos error 193)
krb5_cc_default() failed</pre>

            <p class="p">确保Kerberos能找到该文件，设置环境变量
                <samp class="ph codeph">KRB5CCNAME</samp>然后运行
            <samp class="ph codeph">kinit</samp>。</p>

            <pre class="pre codeblock">set KRB5CCNAME=%USERPROFILE%\krb5cache
kinit</pre>
</li>

          <li class="li">该<samp class="ph codeph">kinit</samp>消息表示<samp class="ph codeph">kinit -k -t</samp>
            命令无法找到密钥表文件。
            <pre class="pre codeblock">kinit: Generic preauthentication failure while getting initial credentials</pre>
<p class="p">确认该Kerberos密钥表文件的完整路径和文件名是正确的。</p>
</li>

        </ul>

      </div>

    </div>

  </div>

  <div class="topic nested1" id="topic_uzb_t5m_sv">
    <h2 class="title topictitle2">使用活动目录配置客户端身份认证</h2>

    <div class="body">
      <p class="p">可以使用微软活动目录（AD）帐户配置微软Windows用户，以便单点登录Greenplum数据库系统。</p>

      <p class="p">配置AD用户帐户以支持使用Kerberos身份认证登录。</p>

      <p class="p">通过AD单点登录，Windows用户可以将活动目录凭据与Windows客户端应用程序一起使用，以登录Greenplum数据库系统。 
        针对使用ODBC的Windows应用程序，ODBC驱动程序可以使用活动目录凭据连接到Greenplum数据库系统。</p>

      <div class="note note">
<span class="notetitle">Note:</span> Windows上运行的Greenplum数据库客户端，如<samp class="ph codeph">gpload</samp>，接与Greenplum数据库连接，不要使用微软活动目录。有关将Windows上的Greenplum数据库客户端连接到启用Kerberos身份认证的Greenplum数据库系统的信息，请参阅<a class="xref" href="#topic_vjg_d5m_sv">在Windows上为Greenplum数据库客户端配置Kerberos</a>。</div>

      <div class="p">本章节包含以下信息。<ul class="ul" id="topic_uzb_t5m_sv__ul_o1g_1qs_bz">
          <li class="li"><a class="xref" href="#topic_uzb_t5m_sv__ad_prereq">先决条件</a></li>

          <li class="li"><a class="xref" href="#topic_uzb_t5m_sv__ad_setup">设置活动目录</a></li>

          <li class="li"><a class="xref" href="#topic_uzb_t5m_sv__gpdb_ad_setup">为活动目录设置Greenplum数据库</a></li>

          <li class="li"><a class="xref" href="#topic_uzb_t5m_sv__ad_sso_examples">单点登录示例</a></li>

          <li class="li"><a class="xref" href="#topic_uzb_t5m_sv__ad_problems">活动目录的问题及可能的解决方案</a></li>

        </ul>
</div>

      <div class="section" id="topic_uzb_t5m_sv__ad_prereq">
<h3 class="title sectiontitle">先决条件</h3>
        
        <p class="p">这些项需要启用AD单点登录到Greenplum数据库系统。</p>

        <ul class="ul" id="topic_uzb_t5m_sv__ul_v2b_5n2_pw">
          <li class="li">必须将Greenplum数据库系统配置为支持Kerberos身份认证。
            有关使用Kerberos身份认证配置Greenplum数据库的信息，请参阅 
              <a class="xref" href="#topic1" title="您可以配置微软的Windows客户端应用程序来连接一个已配置Kerberos认证的Greenplum数据库系统。">为Windows客户端进行Kerberos配置</a>。</li>

          <li class="li">必须知道Greenplum数据库master主机的完全限定域名（FQDN）。
          同时，Greenplum数据库master主机名必须具有域部分。如果系统没有域，则必须将系统配置为使用域。<p class="p">
          该Linux的<samp class="ph codeph">hostname</samp>命令显示FQDN信息。</p>
<pre class="pre codeblock">hostname --fqdn</pre>
</li>

          <li class="li">必须确认Greenplum数据库系统与活动目录域具有相同的日期和时间。
           例如，您可以将Greenplum Database系统NTP时间源设置为AD域控制器，或配置master主机和AD域控制器使用相同的外部时间源。</li>

          <li class="li">要支持单点登录，需要将一个AD作为AD的托管服务账号。如下是对于Kerberos认证的要求。<ul class="ul" id="topic_uzb_t5m_sv__ul_yw3_4nx_tv">
              <li class="li">需要添加增加服务主体名称（SPN）属性到用户账户信息中，因为Kerberos工具在Kerberos认证时需要这些信息。</li>

              <li class="li">此外，由于Greenplum数据库需要无人值守启动，必须在一个Kerberos密钥表文件中提供账号登录细节。</li>

            </ul>
<div class="note note">
<span class="notetitle">Note:</span> 设置SPN和创建密钥表所需的AD管理权限。</div>
</li>

        </ul>

      </div>

      <div class="section" id="topic_uzb_t5m_sv__ad_setup">
<h3 class="title sectiontitle">设置活动目录</h3>
        
        <p class="p">AD命名约定应支持多个Greenplum数据库系统。在此示例中，为Greenplum数据库系统master主机<samp class="ph codeph">prod1</samp>创建了一个新的AD托管服务帐户<samp class="ph codeph">svcPostresProd1</samp>。</p>

        <p class="p">其活动目录的域为<samp class="ph codeph">example.local</samp>。</p>

        <p class="p">Greenplum数据库master主机的完全限定域名是<samp class="ph codeph">prod1.example.local</samp>。</p>

        <p class="p">添加SPN为<samp class="ph codeph">postgres/prod1.example.local</samp>到这个帐户。
          其他Greenplum数据库系统的服务帐户都是<samp class="ph codeph">postgres/<var class="keyword varname">fully.qualified.hostname</var></samp>的形式。</p>

        <p class="p">
          <br><img class="image" id="topic_uzb_t5m_sv__image_bxp_2fx_tv" src="graphics/kerb-ms-ad-new-object.png" width="412" height="280"><br>
        </p>

        <p class="p">在此示例中，AD的密码被设置为永不过期并且用户不能修改。只有在创建Kerberos密钥表文件时才需要AD账户的密码。不需要把它提供给数据库管理员。</p>

        <p class="p">
          <br><img class="image" id="topic_uzb_t5m_sv__image_x3d_gfx_tv" src="graphics/kerb-ms-ad-new-object-2.png" width="477" height="329"><br>
        </p>

        <p class="p">AD管理员必须用Windows的<samp class="ph codeph">setspn</samp>命令行，把服务主体名称属性添加到到账户中。该命令示例为AD用户<samp class="ph codeph">svcPostgresProd1</samp>添加SPN属性<samp class="ph codeph">postgres/prod1.example.local</samp>：</p>

        <pre class="pre codeblock">setspn -A postgres/prod1.example.local svcPostgresProd1</pre>

        <p class="p">如果设置了高级特性，可以在活动目录用户和计算机视图中，看到该SPN属性。
        如果有必要，可以在属性编辑器标签页找到并编辑<samp class="ph codeph">servicePrincipalName</samp>。</p>

        <p class="p">
          <br><img class="image" id="topic_uzb_t5m_sv__image_pbt_hfx_tv" src="graphics/kerb-ms-ad-attribute-editor.png" width="447" height="398"><br>
        </p>

        <p class="p">下一步是创建Kerberos密钥表文件。</p>

        <p class="p">如果有安全性需要，可以选择特定的加密方法，
          如果没有，最好先使其工作，然后删除您不需要的任何加密方法。</p>

        <p class="p">作为AD域管理员，您可以使用<samp class="ph codeph">ktpass</samp>命令列出AD域控制器支持的加密类型：</p>

        <pre class="pre codeblock">ktpass /? </pre>

        <div class="p">作为AD域管理员，可以运行<samp class="ph codeph">ktpass</samp>命令创建一个密钥表文件。该示例命令创建包含如下信息的文件<samp class="ph codeph">svcPostgresProd1.keytab</samp>：<ul class="sl simple">
            <li class="sli">服务主体名称（SPN）：
                <samp class="ph codeph">postgres/prod1.example.local@EXAMPLE.LOCAL</samp>
</li>

            <li class="sli">AD用户：<samp class="ph codeph">svcPostgresProd1</samp>
</li>

            <li class="sli">加密方法： <samp class="ph codeph">ALL available on AD</samp>
</li>

            <li class="sli">主体类型：<samp class="ph codeph">KRB5_NT_PRINCIPAL</samp>
</li>

          </ul>
</div>

        <pre class="pre codeblock">ktpass -out svcPostgresProd1.keytab -princ postgres/prod1.example.local@EXAMPLE.LOCAL -mapUser svcPostgresProd1
   -pass <var class="keyword varname">your_password</var> -crypto all -ptype KRB5_NT_PRINCIPAL</pre>

        <div class="note note">
<span class="notetitle">Note:</span> AD域名<samp class="ph codeph">@EXAMPLE.LOCAL</samp>被附加到SPN。</div>

        <p class="p">拷贝密钥表文件<samp class="ph codeph">svcPostgresProd1.keytab</samp>到Greenplum数据库master主机。</p>

        <p class="p">作为AD域管理员运行<samp class="ph codeph">ktpass</samp>的替代方案，如果桌面具有Java环境可以运行Java的<samp class="ph codeph">ktab.exe</samp>
        工具生成一个密钥表文件。不管使用<samp class="ph codeph">ktpass</samp>或者<samp class="ph codeph">ktab.exe</samp>，密码作为命令行参数，在屏幕上是可见的。</p>

        <div class="p">该命令示例创建一个密钥表文件
            <samp class="ph codeph">svcPostgresProd1.keytab</samp>。
            <pre class="pre codeblock">"c:\Program Files\Java\jre1.8.0_77\bin\ktab.exe" -a svcPostgresprod1 -k svcPostgresProd1.keytab
Password for svcPostgresprod1@EXAMPLE.LOCAL:<var class="keyword varname">your_password</var>
Done!
Service key for svcPostgresprod1 is saved in svcPostgresProd1.keytab</pre>

            <div class="note note">
<span class="notetitle">Note:</span> 如果使用AES256-CTS-HMAC-SHA1-96加密，
            需要从Oracle下载并安装Java扩展<cite class="cite">Java
                  Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files for
                  JDK/JRE</cite>。</div>
</div>

      </div>

      <div class="section" id="topic_uzb_t5m_sv__gpdb_ad_setup">
<h3 class="title sectiontitle">为活动目录设置Greenplum数据库</h3>
        
        <p class="p">如下说明假定Kerberos工作站工具<samp class="ph codeph">krb5-workstation</samp>已经安装在Greenplum数据库master主机上。</p>

        <p class="p">使用AD域名详细信息和AD域控制器的位置，更新<samp class="ph codeph">/etc/krb5.conf</samp>。如下是一个示例配置。</p>

        <pre class="pre codeblock">[logging]
 default = FILE:/var/log/krb5libs.log
 kdc = FILE:/var/log/krb5kdc.log
 admin_server = FILE:/var/log/kadmind.log

[libdefaults]
 default_realm = EXAMPLE.LOCAL
 dns_lookup_realm = false
 dns_lookup_kdc = false
 ticket_lifetime = 24h
 renew_lifetime = 7d
 forwardable = true

[realms]
 EXAMPLE.LOCAL = {
 kdc = bocdc.example.local
 admin_server = bocdc.example.local
 }

[domain_realm]
 .example.local = EXAMPLE.LOCAL
 example.com = EXAMPLE.LOCAL</pre>

        <p class="p">拷贝包含AD用户信息的Kerberos密钥表文件到Greenplum数据库master目录。该示例中复制了在
            <a class="xref" href="#topic_uzb_t5m_sv__ad_setup">设置活动目录</a>中创建的<samp class="ph codeph">svcPostgresProd1.keytab</samp>。</p>

        <pre class="pre codeblock">mv svcPostgresProd1.keytab $MASTER_DATA_DIRECTORY
chown gpadmin:gpadmin $MASTER_DATA_DIRECTORY/svcPostgresProd1.keytab
chmod 600 $MASTER_DATA_DIRECTORY/svcPostgresProd1.keytab</pre>

        <p class="p">在Greenplum数据库<samp class="ph codeph">pg_hba.conf</samp>最后一行添加如下配置。该内容配置Greenplum数据库使用活动目录授权之前行不匹配的连接请求。</p>

        <pre class="pre codeblock">host all all 0.0.0.0/0 gss include_realm=0</pre>

        <p class="p">更新Greenplum数据库<samp class="ph codeph">postgresql.conf</samp>文件中密钥表文件的位置详细信息要使用的主体名称。
        完全限定名称和<samp class="ph codeph">/etc/krb5.conf</samp>中的域名称，构成了完整的服务主体名称。</p>

        <pre class="pre codeblock">krb_server_keyfile = '/data/master/gpseg-1/svcPostgresProd1.keytab'
krb_srvname = 'postgres'</pre>

        <p class="p">为AD用户创建数据库角色。该示例登录到默认数据库并运行<samp class="ph codeph">CREATE ROLE</samp>命令。
        用户<samp class="ph codeph">dev1</samp>是<a class="xref" href="#topic_uzb_t5m_sv__ad_setup">设置活动目录</a>创建密钥表文件的指定用户。</p>

        <pre class="pre codeblock">psql
create role dev1 with login superuser;</pre>

        <p class="p">重启数据库以使用最新的身份认证信息：</p>

        <pre class="pre codeblock">gpstop -a
gpstart  </pre>

        <div class="note note">
<span class="notetitle">Note:</span> Greenplum数据库的依赖库可能与Kerberos工作站工具如<samp class="ph codeph">kinit</samp>冲突。在Greenplum数据库master主机，可以不加载<samp class="ph codeph">$GPHOME/greenplum_path.sh</samp>脚本使用<samp class="ph codeph">gpadmin</samp>命令行，或者取消设置<samp class="ph codeph">LD_LIBRARY_PATH</samp>类似于如下命令：<pre class="pre codeblock">unset LD_LIBRARY_PATH
kinit
source $GPHOME/greenplum_path.sh</pre>
</div>

        <p class="p">确认Greenplum数据库可以通过Kerberos认证访问</p>

        <pre class="pre codeblock">kinit dev1
psql -h prod1.example.local -U dev1</pre>

      </div>

      <div class="section" id="topic_uzb_t5m_sv__ad_sso_examples">
<h3 class="title sectiontitle">单点登录示例</h3>
        
        <p class="p">如下使用AD和Kerberos的单点登录实例，假设使用单点登录AD用户<samp class="ph codeph">dev1</samp>登入到Windows桌面。</p>

        <p class="p">该示例为Greenplum数据库配置Aginity Workbench。在使用单点登录时，启用了“使用集成的安全性”。</p>

        <p class="p">
          <br><img class="image" id="topic_uzb_t5m_sv__image_wdq_kfx_tv" src="graphics/kerb-aginity-config.png" width="351" height="330"><br>
        </p>

        <p class="p">该示例配置一个ODBC源。设置该ODBC源时，请不要输入用户名或密码。该DSN可用作应用程序的ODBC数据源。</p>

        <p class="p">
          <br><img class="image" id="topic_uzb_t5m_sv__image_wf2_mfx_tv" src="graphics/kerb-odbc-config.png" width="410" height="337"><br>
        </p>

        <p class="p">可以用R客户端使用DSN为<samp class="ph codeph">testdata</samp>。该示例配置R以访问DSN。</p>

        <pre class="pre codeblock">library("RODBC")
conn &lt;- odbcDriverConnect("testdata")
sql &lt;- "select * from public.data1"
my_data &lt;- sqlQuery(conn,sql)
print(my_data)</pre>

      </div>

      <div class="section" id="topic_uzb_t5m_sv__ad_problems">
<h3 class="title sectiontitle">活动目录的问题及可能的解决方案</h3>
        
        <ul class="ul" id="topic_uzb_t5m_sv__ul_c4m_y1s_wv">
          <li class="li">Kerberos票据含有的版本号必须匹配AD的版本号。<p class="p">要显示密钥表文件中的版本号，使用<samp class="ph codeph">klist
                -ket</samp>命令，例如：</p>

                <pre class="pre codeblock">klist -ket svcPostgresProd1.keytab</pre>

                <p class="p">要从AD域控制器得到相应的值，可作为一个AD管理员运行这个命令：</p>
<pre class="pre codeblock">kvno postgres/prod1.example.local@EXAMPLE.LOCAL</pre>
</li>

        </ul>

        <ul class="ul" id="topic_uzb_t5m_sv__ul_azk_1bs_wv">
          <li class="li">当Windows ID和Greenplum数据库用户角色ID不匹配时，将会出现如下登录错误。
              该日志文件项显示了登录错误。用户
              <samp class="ph codeph">dev22</samp>尝试从一个Windows桌面登录，而桌面上登录了一个不同的Windows用户。<pre class="pre codeblock">2016-03-29 14:30:54.041151 PDT,"dev22","gpadmin",p15370,th2040321824,
  "172.28.9.181","49283",2016-03-29 14:30:53 PDT,1917,con32,,seg-1,,,x1917,sx1,
  "FATAL","28000","authentication failed for user ""dev22"": valid 
  until timestamp expired",,,,,,,0,,"auth.c",628,</pre>

              <p class="p">当用户能被认证但没有对应Greenplum数据库用户角色时，也会发生这个错误。</p>

              <p class="p">确保该用户是用的是正确的Windows ID并且为该用户ID配置了Greenplum数据库用户角色。
              </p>
</li>

          <li class="li">
            <div class="p">当Kerberos密钥表不含有与正在尝试连接的客户端相匹配的加密类型时，会发生下面这种错误。
              <pre class="pre codeblock">psql -h 'hostname' postgres
psql: GSSAPI continuation error: Unspecified GSS failure. Minor code may provide more information
GSSAPI continuation error: Key version is not available</pre>
</div>

            <p class="p">解决方案是使用<samp class="ph codeph">ktutil</samp>增加额外的加密类型到该密钥表，或者用来自AD中所有加密系统重新创建postgres的密钥表。</p>

          </li>

        </ul>

      </div>

    </div>

  </div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
