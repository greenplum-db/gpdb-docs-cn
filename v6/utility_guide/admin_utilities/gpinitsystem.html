<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      gpinitsystem |
    Greenplum Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/images/favicon.ico' rel='shortcut icon'>

  <script src="/javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_utility_guide x6-0_utility_guide_admin_utilities x6-0_utility_guide_admin_utilities_gpinitsystem has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "greenplum.org";
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="/">Greenplum Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to Greenplum Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="/6-0/utility_guide/../../6-0/homenav.html">Greenplum数据库® 6.0文档</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/utility_guide.html">工具指南</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/admin_utilities/util_ref.html">管理工具参考</a>
        
  <ul>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/analyzedb.html">analyzedb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpactivatestandby.html">gpactivatestandby</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpaddmirrors.html">gpaddmirrors</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpbackup.html">gpbackup</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpcheck.html">gpcheck</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpcheckcat.html">gpcheckcat</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpcheckperf.html">gpcheckperf</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpconfig.html">gpconfig</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpdeletesystem.html">gpdeletesystem</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpexpand.html">gpexpand</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpfdist.html">gpfdist</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpinitstandby.html">gpinitstandby</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpinitsystem.html">gpinitsystem</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpload.html">gpload</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gplogfilter.html">gplogfilter</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpmapreduce.html">gpmapreduce</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpmovemirrors.html">gpmovemirrors</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpperfmon_install.html">gpperfmon_install</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gppkg.html">gppkg</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gprecoverseg.html">gprecoverseg</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpreload.html">gpreload</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gprestore.html">gprestore</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpscp.html">gpscp</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpseginstall.html">gpseginstall</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpssh.html">gpssh</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpssh-exkeys.html">gpssh-exkeys</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpstart.html">gpstart</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpstate.html">gpstate</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpstop.html">gpstop</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpsys.html">gpsys1</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/pgbouncer.html">pgbouncer</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/pgbouncer-ini.html">pgbouncer.ini</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/pgbouncer-admin.html">pgbouncer-admin</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/../pxf/ref/pxf.html">pxf</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/../pxf/ref/pxf-cluster.html">pxf cluster</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/cli_ref.html">客户端工具参考</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/client_utilities/ClientUtilitySummary.html">客户端工具摘要</a>
        
  <ul>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/clusterdb.html">clusterdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/createdb.html">createdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/createlang.html">createlang</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/createuser.html">createuser</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/dropdb.html">dropdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/droplang.html">droplang</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/dropuser.html">dropuser</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_config.html">pg_config</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_dump.html">pg_dump</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_dumpall.html">pg_dumpall</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_restore.html">pg_restore</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/psql.html">psql</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/reindexdb.html">reindexdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/vacuumdb.html">vacuumdb</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/contrib-programs.html">附加程序</a>
        
  <ul>
    
      <li class="">
        <a href="https://www.postgresql.org/docs/9.4/pgupgrade.html">pg_upgrade</a>
        

      </li>
    
      <li class="">
        <a href="https://www.postgresql.org/docs/9.4/pgxlogdump.html">pg_xlogdump</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    gpinitsystem
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        

    
    <h1 class="title topictitle1">gpinitsystem</h1>

    <div class="body">
        <p class="p">使用<samp class="ph codeph">gpinitsystem_config</samp>文件中指定的配置参数初始化一个Greenplum数据库系统。</p>

        <div class="section" id="topic1__section2">
<h2 class="title sectiontitle">概要</h2>
            
            <pre class="pre codeblock"><strong class="ph b">gpinitsystem</strong> <strong class="ph b">-c</strong> <var class="keyword varname">cluster_configuration_file</var> 
            [<strong class="ph b">-h</strong> <var class="keyword varname">hostfile_gpinitsystem</var>]
            [<strong class="ph b">-B</strong> <var class="keyword varname">parallel_processes</var>] 
            [<strong class="ph b">-p</strong> <var class="keyword varname">postgresql_conf_param_file</var>]
            [<strong class="ph b">-s</strong> <var class="keyword varname">standby_master_host</var>
                [<strong class="ph b">-P</strong> <var class="keyword varname">standby_master_port</var>]
                [<strong class="ph b">-S</strong> <var class="keyword varname">standby_master_datadir</var> | <strong class="ph b">--standby_datadir</strong>=<var class="keyword varname">standby_master_datadir</var>]]
            [<strong class="ph b">-m</strong> <var class="keyword varname">number</var> | <strong class="ph b">--max_connections</strong>=<var class="keyword varname">number</var>]
            [<strong class="ph b">-b</strong> <var class="keyword varname">size</var> | <strong class="ph b">--shared_buffers</strong>=<var class="keyword varname">size</var>]
            [<strong class="ph b">-n <var class="keyword varname">locale</var> | --locale</strong>=<var class="keyword varname">locale</var>] [<strong class="ph b">--lc-collate</strong>=<var class="keyword varname">locale</var>] 
            [<strong class="ph b">--lc-ctype</strong>=<var class="keyword varname">locale</var>] [<strong class="ph b">--lc-messages</strong>=<var class="keyword varname">locale</var>] 
            [<strong class="ph b">--lc-monetary</strong>=<var class="keyword varname">locale</var>] [<strong class="ph b">--lc-numeric</strong>=<var class="keyword varname">locale</var>] 
            [<strong class="ph b">--lc-time</strong>=<var class="keyword varname">locale</var>] [<strong class="ph b">-e</strong> <var class="keyword varname">password</var> | <strong class="ph b">--su_password</strong>=<var class="keyword varname">password</var>] 
            [<strong class="ph b">--mirror-mode</strong>={group|spread}] [<strong class="ph b">-a</strong>] [<strong class="ph b">-q</strong>] [<strong class="ph b">-l</strong> <var class="keyword varname">logfile_directory</var>] [<strong class="ph b">-D</strong>]
            [<strong class="ph b">-I</strong> <var class="keyword varname">input_configuration_file</var>]
            [<strong class="ph b">-O</strong> <var class="keyword varname">output_configuration_file</var>]

<strong class="ph b">gpinitsystem</strong> <strong class="ph b">-v | --version</strong>

<strong class="ph b">gpinitsystem</strong> <strong class="ph b">-? | --help</strong></pre>

        </div>

        <div class="section" id="topic1__section3">
<h2 class="title sectiontitle">描述</h2>
            
            <p class="p"><samp class="ph codeph">gpinitsystem</samp>工具将使用配置文件中定义的值和客户提供的命令行选项
                创建一个Greenplum数据库实例。
                有关配置文件的更多信息，请参见<a class="xref" href="#topic1__section5">初始配置文件格式</a>。在
                运行此工具之前，请确保已经在阵列中所有主机上安装了Greenplum数据库软件。
               </p>

            <p class="p">带有<samp class="ph codeph">-O <var class="keyword varname">output_configuration_file</var></samp>选项时，
                    <samp class="ph codeph">gpinitsystem</samp>不会创建一个新数据库，而是把所有的配置都写入一个配置文件。
                该文件使用<samp class="ph codeph">QD_PRIMARY_ARRAY</samp>和
                    <samp class="ph codeph">PRIMARY_ARRAY</samp>参数来定义每个成员相关的主机名、端口号、数据目录、Segment前缀、
                Segment ID和Content ID。集群配置的详细信息可以根据需要修改，以匹配Greenplum数据库备份中的可用值，
                活着可以简单的被用来重建相同集群配置。使用<samp class="ph codeph">QD_PRIMARY_ARRAY</samp>和
                <samp class="ph codeph">PRIMARY_ARRAY</samp>的配置文件必须被传递给<samp class="ph codeph">gpinitsystem</samp> <samp class="ph codeph">-I
                    <var class="keyword varname">input_configuration_file</var></samp>。
                详细信息请见<a class="xref" href="#topic1__section5">初始配置文件格式</a>。</p>

            <p class="p">在Greenplum数据库DBMS中，必须在系统中的所有主机上初始化每个数据库实例（Master和所有的Segment），
                以便它们可以作为统一的DBMS一起使用。<samp class="ph codeph">gpinitsystem</samp>工具负责初始化Greenplum的
                Master和每个Segment实例，并作为一个整体配置系统。
                </p>

            <p class="p">在运行<samp class="ph codeph">gpinitsystem</samp>之前，用户必须设置<samp class="ph codeph">$GPHOME</samp>环境变量以
                指向Master上的Greenplum数据库安装位置，并且使用<samp class="ph codeph">gpssh-exkeys</samp>在阵列中的
                所有主机地址之间交换SSH密钥。</p>

            <p class="p">这个工具执行以下任务：</p>

            <ul class="ul">
                <li class="li" id="topic1__it147947">验证配置文件中参数的正确。</li>

                <li class="li" id="topic1__it147948">确保可以建立到每个主机地址的连接。如果主机地址无法到达，该工具将退出。</li>

                <li class="li" id="topic1__it147949">验证区域设置。</li>

                <li class="li" id="topic1__it147950">显示将要使用的配置并提示用户进行确认。</li>

                <li class="li" id="topic1__it147951">初始化Master实例。</li>

                <li class="li" id="topic1__it147952">初始化后备Master实例（如果指定）。</li>

                <li class="li" id="topic1__it147953">初始化主Segment实例。</li>

                <li class="li" id="topic1__it147954">初始化镜像Segment实例（如果配置）。</li>

                <li class="li" id="topic1__it147957">配置Greenplum数据库系统并检查错误。</li>

                <li class="li" id="topic1__it147961">启动Greenplum数据库系统。</li>

            </ul>

            <div class="note note">
<span class="notetitle">Note:</span> 该工具在系统内部采用SSH连接执行各项操作任务。在大型Greenplum集群、云部署或每台主机部署了大量的
                segment实例时，可能会遇到超过主机最大授权连接数限制的情况。此时需要考虑更新SSH配置参数<samp class="ph codeph">MaxStartups</samp>
                以提高该限制。更多关于SSH配置的选项，请参考您的Linux分发版的SSH文档。</div>

        </div>

        <div class="section" id="topic1__section4">
<h2 class="title sectiontitle">选项</h2>
            
            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">-a</dt>

                    <dd class="dd pd">不提示用户进行确认。</dd>

                
                
                    <dt class="dt pt dlterm">-B <var class="keyword varname">parallel_processes</var>
</dt>

                    <dd class="dd pd">要并行创建的Segment数。如果未指定，该工具一次最多启动4个并行进程。</dd>

                
                
                    <dt class="dt pt dlterm">-c <var class="keyword varname">cluster_configuration_file</var>
</dt>

                    <dd class="dd pd">必需。配置文件的完整路径和文件名称，其中包括所有已经定义的参数，用于配置和初始化新的
                        Greenplum数据库系统。有关此文件的说明，请参见<a class="xref" href="#topic1__section5">初始配置文件格式</a>初始化配置文件格式。<samp class="ph codeph">gpinitsystem</samp>必须指定
                        <samp class="ph codeph">-c <var class="keyword varname">cluster_configuration_file</var></samp>选项或
                       <samp class="ph codeph">-I <var class="keyword varname">input_configuration_file</var></samp>
                       选项。</dd>

                
                
                    <dt class="dt pt dlterm">-D</dt>

                    <dd class="dd pd">设置日志输出等级为debug。</dd>

                
                
                    <dt class="dt pt dlterm">-h <var class="keyword varname">hostfile_gpinitsystem</var>
</dt>

                    <dd class="dd pd">可选。包含Segment主机地址的文件的完整路径和文件名。如果未在命令行中指定，则可以使用
                        <var class="keyword varname">gpinitsystem_config</var>文件中的<samp class="ph codeph">MACHINE_LIST_FILE</samp>
                        参数指定主机文件。</dd>

                
                
                    <dt class="dt pt dlterm">-I <var class="keyword varname">input_configuration_file</var>
</dt>

                    <dd class="dd pd">配置文件的全路径及文件名，该文件使用<samp class="ph codeph">QD_PRIMARY_ARRAY</samp>和
                        <samp class="ph codeph">PRIMARY_ARRAY</samp>参数定义Greenplum数据库成员和Segment实例。
                        该配置文件通常用gpinitsystem <samp class="ph codeph">-O
                                <var class="keyword varname">output_configuration_file</var></samp>生成。 
                        <samp class="ph codeph">gpinitsystem</samp>必须指定
                        <samp class="ph codeph">-c <var class="keyword varname">cluster_configuration_file</var></samp>选项或
                        <samp class="ph codeph">-I <var class="keyword varname">input_configuration_file</var></samp>
                        选项。</dd>

                
                
                    <dt class="dt pt dlterm"> -n <var class="keyword varname">locale</var> | --locale=<var class="keyword varname">locale</var>
                    </dt>

                    <dd class="dd pd">设置Greenplum数据库使用的默认区域。如果未指定，则Master主机的
                        <samp class="ph codeph">LC_ALL</samp>、<samp class="ph codeph">LC_COLLATE</samp>或
                        <samp class="ph codeph">LANG</samp>环境变量决定区域。如果这些没有设置，则
                        默认的区域是<samp class="ph codeph">C</samp>（<samp class="ph codeph">POSIX</samp>）。
                        区域标识符由语言标识符、地区标识符和可选的字符集编码组成。例如，
                        <samp class="ph codeph">sv_SE</samp>是瑞典语，<samp class="ph codeph">en_US</samp>是美国英语，
                        <samp class="ph codeph">fr_CA</samp>是加拿大法语。如果不止一个字符集可以用
                        于一个区域，则规范如下所示：<samp class="ph codeph">en_US.UTF-8</samp>
                        （区域规范和字符集编码）。在大多数系统中，命令<samp class="ph codeph">locale</samp>
                        将显示区域环境设置，<samp class="ph codeph">locale -a</samp>将会显示所有可用的区域的列表。
                        </dd>

                
                
                    <dt class="dt pt dlterm">--lc-collate=<var class="keyword varname">locale</var>
</dt>

                    <dd class="dd pd">类似于<samp class="ph codeph">--locale</samp>，但是设置用于排序规则（排序数据）的区域。
                        Greenplum数据库初始化后无法更改排序顺序，因此有必要选择与用户计划用于数据的
                        字符集编码兼容的排序规则区域。<samp class="ph codeph">C</samp>或<samp class="ph codeph">POSIX</samp>
                        有一个特殊的排序规则名称（字节顺序排序而不是字典顺序排序）。<samp class="ph codeph">C</samp>
                        排序规则可以用于任何字符编码。
                        </dd>

                
                
                    <dt class="dt pt dlterm">--lc-ctype=<var class="keyword varname">locale</var>
</dt>

                    <dd class="dd pd">类似于<samp class="ph codeph">--locale</samp>，但设置用于字符分类的语言环境
                        （哪些字符序列是有效的，以及它们如何被解释）。在Greenplum数据库初始化
                        之后，这是不能更改的，因此有必要选择一个与用户计划存储在Greenplum数据库
                        中的数据兼容的字符分类区域。
                        </dd>

                
                
                    <dt class="dt pt dlterm">--lc-messages=<var class="keyword varname">locale</var>
</dt>

                    <dd class="dd pd">类似于<samp class="ph codeph">--locale</samp>，但设置用于Greenplum数据库输出消息的语言环境。
                        当前版本的Greenplum数据库不支持输出消息的多种区域（所有消息均为英文），所以更改此
                        设置不会有任何效果。
                       </dd>

                
                
                    <dt class="dt pt dlterm">--lc-monetary=<var class="keyword varname">locale</var>
</dt>

                    <dd class="dd pd">类似<samp class="ph codeph">--locale</samp>，但是设置用于格式化货币金额的区域。
                        </dd>

                
                
                    <dt class="dt pt dlterm">--lc-numeric=<var class="keyword varname">locale</var>
</dt>

                    <dd class="dd pd">类似<samp class="ph codeph">--locale</samp>，但是设置用于格式化数字的区域。</dd>

                
                
                    <dt class="dt pt dlterm">--lc-time=<var class="keyword varname">locale</var>
</dt>

                    <dd class="dd pd">类似<samp class="ph codeph">--locale</samp>，但设置用于格式化日期和时间的区域。</dd>

                
                
                    <dt class="dt pt dlterm">-l <var class="keyword varname">logfile_directory</var>
</dt>

                    <dd class="dd pd">写入日志文件的目录，默认为<samp class="ph codeph">~/gpAdminLogs</samp>。
                            </dd>

                
                
                    <dt class="dt pt dlterm"> -m <var class="keyword varname">number</var> | --max_connections=number</dt>

                    <dd class="dd pd">设置Master允许的最大客户端连接数。默认值是250。</dd>

                
                
                    <dt class="dt pt dlterm">-O <var class="keyword varname">output_configuration_file</var>
</dt>

                    <dd class="dd pd">当使用<samp class="ph codeph">-O</samp>选项时，<samp class="ph codeph">gpinitsystem</samp>不会创建一个
                        新的Greenplum集群，而是会将提供的集群配置信息写入指定的
                        When used with the  option, 
                        does not create a new Greenplum Database cluster but instead writes the
                        supplied cluster configuration information to the specified
                        <samp class="ph codeph"><var class="keyword varname">output_configuration_file</var></samp>文件。
                        该文件使用<samp class="ph codeph">QD_PRIMARY_ARRAY</samp>和
                        <samp class="ph codeph">PRIMARY_ARRAY</samp>参数来定义每个成员相关的主机名、端口号、数据目录、Segment前缀、
                        Segment ID和Content ID。集群配置的详细信息可以根据需要修改，以匹配Greenplum数据库备份中的可用值，
                        活着可以简单的被用来重建相同集群配置。使用<samp class="ph codeph">QD_PRIMARY_ARRAY</samp>、
                        <samp class="ph codeph">PRIMARY_ARRAY</samp>和<samp class="ph codeph">MIRROR_ARRAY</samp>的配置文件必须被传递给
                        <samp class="ph codeph">gpinitsystem</samp> <samp class="ph codeph">-I
                            <var class="keyword varname">input_configuration_file</var></samp>以初始化集群。
                             </dd>

                
                
                    <dt class="dt pt dlterm">-p <var class="keyword varname">postgresql_conf_param_file</var>
</dt>

                    <dd class="dd pd">可选。包含用户想要为Greenplum数据库设置的<samp class="ph codeph">postgresql.conf</samp>参数
                        设置的文件名称。这些设置将在初始化单个Master和Segment实例时使用。 用户也可以在
                        初始化后使用<samp class="ph codeph">gpconfig</samp>工具来设置参数。</dd>

                
                
                    <dt class="dt pt dlterm">-q</dt>

                    <dd class="dd pd">以静默模式运行。命令行输出不显示在屏幕上，但仍然写入日志文件。</dd>

                
                
                    <dt class="dt pt dlterm"> -b <var class="keyword varname">size</var> | --shared_buffers=<var class="keyword varname">size</var>
</dt>

                    <dd class="dd pd">设置Greenplum服务器实例用于共享内存缓冲区的内存量。用户可以指定以千字节（KB）、
                        兆字节（MB）或千兆字节（GB）为单位的大小。默认值是125MB。</dd>

                
                
                    <dt class="dt pt dlterm">-s <var class="keyword varname">standby_master_host</var>
</dt>

                    <dd class="dd pd">可选。如果用户希望配置备份Master主机，请使用此选项指定主机名称。 Greenplum数据库
                        软件必须已经在该主机上安装和配置。</dd>

                
                
                    <dt class="dt pt dlterm">-P <var class="keyword varname">standby_master_port</var>
</dt>

                    <dd class="dd pd">如果使用<samp class="ph codeph">-s</samp>配置了备用Master实例，可以用该选项定义端口号。
                        默认端口号与Master端口号相同。为了在同一主机上运行备用和主Master，必须使用该选项
                        指定一个不同的端口号。Greenplum数据库软件必须已经在备用主机上安装和配置好。</dd>

                
                
                    <dt class="dt pt dlterm">-S <var class="keyword varname">standby_master_datadir</var> |
                            --standby_dir=<var class="keyword varname">standby_master_datadir</var>
</dt>

                    <dd class="dd pd">如果使用<samp class="ph codeph">-s</samp>配置备用Master主机，可以使用该选项指定数据目录。
                        如果在同一台主机上配置备用Master和主Master实例，那必须定义该选项以指定不同的目录。</dd>

                
                
                    <dt class="dt pt dlterm"> -e <var class="keyword varname">superuser_password</var> |
                            --su_password=<var class="keyword varname">superuser_password</var>
</dt>

                    <dd class="dd pd">使用此选项可指定为Greenplum数据库超级用户帐户（例如<samp class="ph codeph">gpadmin</samp>）设置的密码。
                        如果未指定此选项，则默认密码<samp class="ph codeph">gparray</samp>会分配给超级用户。用户以后可以使用
                        <samp class="ph codeph">ALTER ROLE</samp>命令更改密码。
                        <p class="p">推荐的最佳安全实践：</p>

                        <ul class="ul" id="topic1__ul_vnd_kt2_44">
                            <li class="li" id="topic1__it148039">不要生产环境中使用默认密码选项。</li>

                            <li class="li" id="topic1__it148040">安装之后立即更改密码。</li>

                        </ul>
</dd>

                
                
                    <dt class="dt pt dlterm">--mirror_mode={group|spread}</dt>

                    <dd class="dd pd">使用该选项指定镜像Segment实例所在的镜像主机。默认采用<samp class="ph codeph">group</samp>模式，
                        会将一台主机上的所有主Segment实例的镜像放到另外一台主机。
                        <samp class="ph codeph">spread</samp>会将一台主机上的所有实例散布在另外的主机上。
                        <samp class="ph codeph">spread</samp>仅在集群主机数量大于每台主机上的实例数量时可用。
                        有关Greenplum数据库镜像策略的详细信息，请见<a class="xref" href="../../admin_guide/highavail/topics/g-overview-of-segment-mirroring.html#topic3">Segment镜像概述</a>。</dd>

                
                
                    <dt class="dt pt dlterm">-v | --version</dt>

                    <dd class="dd pd">显示<samp class="ph codeph">gpinitsystem</samp>的版本。</dd>

                
                
                    <dt class="dt pt dlterm">-? | --help</dt>

                    <dd class="dd pd">显示<samp class="ph codeph">gpinitsystem</samp>命令行参数，然后退出。</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section5">
<h2 class="title sectiontitle">初始配置文件格式</h2>
            
            <p class="p"><samp class="ph codeph">gpinitsystem</samp>需要定义有以下参数的配置文件。示例初始化配置文件可以在
                <samp class="ph codeph">$GPHOME/docs/cli_help/gpconfigs/gpinitsystem_config</samp>中找到。
                 </p>

            <p class="p">为了避免Greenplum数据库和其他应用程序之间的端口冲突，Greenplum数据库端口号不应该在操作系统
                参数<samp class="ph codeph">net.ipv4.ip_local_port_range</samp>指定的范围之内。例如，如果
                <samp class="ph codeph">net.ipv4.ip_local_port_range = 10000 65535</samp>，则可以将Greenplum
                数据库基本端口号设置为以下这些值。
                </p>

            <div class="p">
                <pre class="pre codeblock">PORT_BASE = 6000
MIRROR_PORT_BASE = 7000</pre>

            </div>

            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">ARRAY_NAME</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>用户正在配置的阵列的名称。用户可以使用任何用户喜欢的名字。
                        如果名称包含空格，请将名称放在引号中。</dd>

                
                
                    <dt class="dt pt dlterm">MACHINE_LIST_FILE</dt>

                    <dd class="dd pd">
<strong class="ph b">可选。</strong>可以用来替代<samp class="ph codeph">-h</samp>选项。这指定包含构成Greenplum数据库系统
                        的Segment主机地址名称列表的文件。Master主机被假定为运行该工具的主机，并且不应该被包含在
                        此文件中。如果用户的Segment主机有多个网络接口，则该文件将包含该主机的所有地址。给出该文件
                        的绝对路径。
                        </dd>

                
                
                    <dt class="dt pt dlterm">SEG_PREFIX</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>这指定了一个前缀，用于命名Master和Segment实例上的数据目录。
                        Greenplum数据库系统中数据目录的命名约定是<var class="keyword varname">SEG_PREFIXnumber</var>，
                        其中<var class="keyword varname">number</var>对Segment实例从0开始（Master始终为-1）。因此，
                        如果用户选择前缀<samp class="ph codeph">gpseg</samp>，则用户的Master实例数据目录将会被命名为
                        <samp class="ph codeph">gpseg-1</samp>，并且Segment实例将被命名为<samp class="ph codeph">gpseg0</samp>、
                        <samp class="ph codeph">gpseg1</samp>、<samp class="ph codeph">gpseg2</samp>、<samp class="ph codeph">gpseg3</samp>等等。
                        </dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__port_base">PORT_BASE</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>这指定计算主Segment端口用到的基础数字。主机上的第一个主Segment端口被设置为
                        <samp class="ph codeph">PORT_BASE</samp>，然后对该主机上的每个额外主Segment都加一，有效值为1-65535。
                        </dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__data_directory">DATA_DIRECTORY</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>这指定工具将创建主Segment数据目录的数据存储位置。列表中的位置数量决定了
                        每台物理主机将创建的主Segment的数量（如果主机文件中列出了主机的多个地址，Segment的数量
                        将被均匀分布在指定的接口地址间）。如果用户希望在同一位置创建数据目录，则可以多次列出相同
                        的数据存储区域。运行<samp class="ph codeph">gpinitsystem</samp>的用户（例如，<samp class="ph codeph">gpadmin</samp>用户）
                        必须具有写入这些目录的权限。例如，这将为每台主机创建六个主Segment：</dd>

                    <dd class="dd pd">
                        <pre class="pre codeblock">declare -a DATA_DIRECTORY=(/data1/primary /data1/primary 
/data1/primary /data2/primary /data2/primary /data2/primary)</pre>

                    </dd>

                
                
                    <dt class="dt pt dlterm">MASTER_HOSTNAME</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong> Master实例的主机名。这个主机名必须与机器上配置的主机名完全匹配
                        （运行<samp class="ph codeph">hostname</samp>命令以确定正确的主机名）。</dd>

                
                
                    <dt class="dt pt dlterm">MASTER_DIRECTORY</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>这指定在Master主机上创建数据目录的位置。用户必须确保运行<samp class="ph codeph">gpinitsystem</samp>
                        的用户（例如<samp class="ph codeph">gpadmin</samp>用户）有权写入此目录。</dd>

                
                
                    <dt class="dt pt dlterm">MASTER_PORT</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>Master实例的端口号。这是访问Greenplum数据库系统时用户和客户端连接将
                        使用的端口号。</dd>

                
                
                    <dt class="dt pt dlterm">TRUSTED_SHELL</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong><samp class="ph codeph">gpinitsystem</samp>工具用来在远程主机上执行命令的shell。
                        允许的值为<samp class="ph codeph">ssh</samp>。用户必须在运行<samp class="ph codeph">gpinitsystem</samp>
                        工具之前设置用户的可信主机环境（用户可以使用<samp class="ph codeph">gpssh-exkeys</samp>来做这件事）。
                        </dd>

                
                
                    <dt class="dt pt dlterm">CHECK_POINT_SEGMENTS</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>日志文件段（每个段通常为16兆字节）中自动预写式日志（WAL）检查点之间的最大距离。
                        这将在Greenplum数据库系统的每个Segment实例的<samp class="ph codeph">postgresql.conf</samp>文件中
                        设置<samp class="ph codeph">checkpoint_segments</samp>参数。</dd>

                
                
                    <dt class="dt pt dlterm">ENCODING</dt>

                    <dd class="dd pd">
<strong class="ph b">必需。</strong>要使用的字符集编码。该字符集必须与所使用的<samp class="ph codeph">--locale</samp>设置兼容，
                        尤其是<samp class="ph codeph">--lc-collate</samp>和<samp class="ph codeph">--lc-ctype</samp>。Greenplum数据库
                        支持和PostgreSQL相同的字符集。</dd>

                
                
                    <dt class="dt pt dlterm">DATABASE_NAME</dt>

                    <dd class="dd pd">
<strong class="ph b">可选。</strong>系统初始化之后要创建的Greenplum数据库的名称。用户可以随后使用
                        <samp class="ph codeph">CREATE DATABASE</samp>命令或<samp class="ph codeph">createdb</samp>工具创建数据库。
                            </dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__mirror_port_base">MIRROR_PORT_BASE</dt>

                    <dd class="dd pd">
<strong class="ph b">可选。</strong>这指定计算镜像Segment端口号用到的基数。主机上的第一个镜像Segment端口设置为
                        <samp class="ph codeph">MIRROR_PORT_BASE</samp>，然后对该主机上每个额外的镜像Segment加一。有效值范围
                        从1到65535，不能与<samp class="ph codeph">PORT_BASE</samp>计算的端口冲突。</dd>

                
                
                    <dt class="dt pt dlterm">MIRROR_DATA_DIRECTORY</dt>

                    <dd class="dd pd">
<strong class="ph b">可选。</strong>指定工具将创建镜像Segment数据目录的数据存储位置。必须为镜像Segment
                        实例声明与主Segment实例相同数量的数据目录（请参阅<samp class="ph codeph">DATA_DIRECTORY</samp>参数）。
                        运行<samp class="ph codeph">gpinitsystem</samp>的用户（例如，<samp class="ph codeph">gpadmin</samp>用户）
                        必须具有写入这些目录的权限。例如：</dd>

                    <dd class="dd pd">
                        <pre class="pre codeblock">declare -a MIRROR_DATA_DIRECTORY=(/data1/mirror 
/data1/mirror /data1/mirror /data2/mirror /data2/mirror 
/data2/mirror)</pre>

                    </dd>

                
                
                    <dt class="dt pt dlterm">QD_PRIMARY_ARRAY, PRIMARY_ARRAY, MIRROR_ARRAY</dt>

                    <dd class="dd pd">这些参数只能通过配置文件提供给<samp class="ph codeph">gpinitsystem</samp>
                        <samp class="ph codeph">-I <var class="keyword varname">input_configuration_file</var></samp>。
                            <samp class="ph codeph">QD_PRIMARY_ARRAY</samp>、<samp class="ph codeph">PRIMARY_ARRAY</samp>和
                            <samp class="ph codeph">MIRROR_ARRAY</samp>定义Greenplum数据库Master主机、主实例和
                        镜像实例，格式如下：
                        <pre class="pre codeblock"><var class="keyword varname">host</var>~<var class="keyword varname">port</var>~<var class="keyword varname">data_directory</var>/<var class="keyword varname">seg_prefix&lt;segment_id&gt;</var>~<var class="keyword varname">dbid</var>~<var class="keyword varname">content_id</var></pre>

                        Greenplum数据库Master会一直使用-1作为Segment ID和Content ID。例如：
                        <pre class="pre codeblock">QD_PRIMARY_ARRAY=127.0.0.1~5432~/gpmaster/gpsne-1~1~-1~0
declare -a PRIMARY_ARRAY=(
127.0.0.1~40000~/gpdata1/gpsne0~2~0
127.0.0.1~40001~/gpdata2/gpsne1~3~1
)
declare -a MIRROR_ARRAY=(
127.0.0.1~50000~/gpmirror1/gpsne0~4~0
127.0.0.1~50001~/gpmirror2/gpsne1~5~1
)</pre>
</dd>

                    <dd class="dd pd">客户可以使用<samp class="ph codeph">gpinitsystem</samp>
                        <samp class="ph codeph">-O <var class="keyword varname">output_configuration_file</var></samp>来生成
                            <samp class="ph codeph">QD_PRIMARY_ARRAY</samp>、<samp class="ph codeph">PRIMARY_ARRAY</samp>、
                            <samp class="ph codeph">MIRROR_ARRAY</samp>参数，包含主机、数据目录、Segment前缀和端
                        口号信息。出于恢复的目的，您可以编辑Segment和Content ID的值以匹配现存Greenplum
                        数据库备份的值。</dd>

                
                
                    <dt class="dt pt dlterm">HEAP_CHECKSUM</dt>

                    <dd class="dd pd">
<strong class="ph b">可选。</strong>该参数指定堆表的数据是否启用checksum。当启用时，所有数据库上的堆存储
                        进行checksum，Greenplum数据库可以预防I/O系统损坏导致数据损坏。该选项只有在系统
                        初始化时进行设置并且以后不能改变。</dd>

                    <dd class="dd pd">
<samp class="ph codeph">HEAP_CHECKSUM</samp>选项默认启用，强烈不建议将该选项设置为禁用。
                        如果禁用该选项，存储的数据损坏不会被检测到，数据恢复会相当困难。</dd>

                    <dd class="dd pd">要检查是否Greenplum数据库启用了堆表checksum，可以通过<samp class="ph codeph">gpconfig</samp>
                        管理工具查询<samp class="ph codeph">data_checksums</samp>参数：
                        <pre class="pre codeblock">$ gpconfig -s data_checksums</pre>
</dd>

                
                
                    <dt class="dt pt dlterm">HBA_HOSTNAMES</dt>

                    <dd class="dd pd">
<strong class="ph b">可选。</strong>该参数控制<samp class="ph codeph">gpinitsystem</samp>工具在<samp class="ph codeph">pg_hba.conf</samp>
                        中开放访问IP地址或者主机名的信息。默认值为<samp class="ph codeph">0</samp>，该工具会
                        使用IP地址更新hba文件。当初始化Greenplum数据库系统时，指定
                            <samp class="ph codeph">HBA_HOSTNAMES=1</samp>来让工具使用主机名更新
                        <samp class="ph codeph">pg_hba.conf</samp>文件。</dd>

                    <dd class="dd pd">更多有关Greenplum数据库解决<samp class="ph codeph">pg_hba.conf</samp>文件中主机名的信息，请见<a class="xref" href="../../admin_guide/client_auth.html#topic1" title="本主题讲解如何为Greenplum数据库配置客户端访问和身份验证。">配置客户端认证</a>。</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section6">
<h2 class="title sectiontitle">示例</h2>
            
            <p class="p">通过提供配置文件和Segment主机地址文件来初始化Greenplum数据库阵列，并设置一个散布镜像
                （<samp class="ph codeph">--mirror-mode=spread</samp>）配置：
                </p>

            <pre class="pre codeblock">$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem --mirror-mode=spread</pre>

            <p class="p">初始化Greenplum数据库阵列并设置超级用户远程口令：</p>

            <pre class="pre codeblock">$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem --su-password=mypassword</pre>

            <p class="p">初始化带有可选后备Master主机的Greenplum数据库阵列：</p>

            <pre class="pre codeblock">$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem -s host09</pre>

            <p class="p">代替初始化一个Greenplum数据库集群，将提供的配置文件信息写入到输出文件。该输出文件采用<samp class="ph codeph">QD_PRIMARY_ARRAY</samp>和
                <samp class="ph codeph">PRIMARY_ARRAY</samp>参数定义Master和Segment主机：</p>

            <pre class="pre codeblock">$ gpinitsystem -c gpinitsystem_config -h hostfile_gpinitsystem --mirror-mode=spread -O cluster_init.config</pre>

            <p class="p">采用输入带有<samp class="ph codeph">QD_PRIMARY_ARRAY</samp>和<samp class="ph codeph">PRIMARY_ARRAY</samp>参数的配置文件
                （该文件定义Greenplum数据库集群）初始化Greenplum数据库：
               </p>

            <pre class="pre codeblock">$ gpinitsystem -I cluster_init.config</pre>

        </div>

        <div class="section" id="topic1__section7">
<h2 class="title sectiontitle">另见</h2>
            
            <p class="p"><samp class="ph codeph"><a class="xref" href="gpssh-exkeys.html#topic1">gpssh-exkeys</a></samp>、
                        <samp class="ph codeph"><a class="xref" href="gpdeletesystem.html#topic1">gpdeletesystem</a></samp></p>

        </div>

    </div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
