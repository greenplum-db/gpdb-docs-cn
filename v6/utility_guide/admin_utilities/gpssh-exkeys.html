<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      gpssh-exkeys |
    Greenplum Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/gpdb-docs-cn/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/gpdb-docs-cn/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/gpdb-docs-cn/images/favicon.ico' rel='shortcut icon'>

  <script src="/gpdb-docs-cn/javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_utility_guide x6-0_utility_guide_admin_utilities x6-0_utility_guide_admin_utilities_gpssh-exkeys has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "greenplum.org";
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="/">Greenplum Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to Greenplum Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/../../gpdb-docs-cn/v6/homenav.html">Greenplum数据库® 6.0文档</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/utility_guide/utility_guide.html">工具指南</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/util_ref.html">管理工具参考</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/analyzedb.html">analyzedb</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpactivatestandby.html">gpactivatestandby</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpaddmirrors.html">gpaddmirrors</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpbackup.html">gpbackup</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpcheck.html">gpcheck</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpcheckcat.html">gpcheckcat</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpcheckperf.html">gpcheckperf</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpconfig.html">gpconfig</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpdeletesystem.html">gpdeletesystem</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpexpand.html">gpexpand</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpfdist.html">gpfdist</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpinitstandby.html">gpinitstandby</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpinitsystem.html">gpinitsystem</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpload.html">gpload</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gplogfilter.html">gplogfilter</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpmapreduce.html">gpmapreduce</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpmovemirrors.html">gpmovemirrors</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpperfmon_install.html">gpperfmon_install</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gppkg.html">gppkg</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gprecoverseg.html">gprecoverseg</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpreload.html">gpreload</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gprestore.html">gprestore</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpscp.html">gpscp</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpseginstall.html">gpseginstall</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpssh.html">gpssh</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpssh-exkeys.html">gpssh-exkeys</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpstart.html">gpstart</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpstate.html">gpstate</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpstop.html">gpstop</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/gpsys.html">gpsys1</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/pgbouncer.html">pgbouncer</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/pgbouncer-ini.html">pgbouncer.ini</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/admin_utilities/pgbouncer-admin.html">pgbouncer-admin</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/../pxf/ref/pxf.html">pxf</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/../pxf/ref/pxf-cluster.html">pxf cluster</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/utility_guide/cli_ref.html">客户端工具参考</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/ClientUtilitySummary.html">客户端工具摘要</a>
        
  <ul>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/clusterdb.html">clusterdb</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/createdb.html">createdb</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/createlang.html">createlang</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/createuser.html">createuser</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/dropdb.html">dropdb</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/droplang.html">droplang</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/dropuser.html">dropuser</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/pg_config.html">pg_config</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/pg_dump.html">pg_dump</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/pg_dumpall.html">pg_dumpall</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/pg_restore.html">pg_restore</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/psql.html">psql</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/reindexdb.html">reindexdb</a>
        

      </li>
    
      <li class="">
        <a href="/gpdb-docs-cn/v6/utility_guide/client_utilities/vacuumdb.html">vacuumdb</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/gpdb-docs-cn/v6/utility_guide/contrib-programs.html">附加程序</a>
        
  <ul>
    
      <li class="">
        <a href="https://www.postgresql.org/docs/9.4/pgupgrade.html">pg_upgrade</a>
        

      </li>
    
      <li class="">
        <a href="https://www.postgresql.org/docs/9.4/pgxlogdump.html">pg_xlogdump</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    gpssh-exkeys
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        

    
    <h1 class="title topictitle1">gpssh-exkeys</h1>

    <div class="body">
        <p class="p">在主机之间交换SSH公钥。</p>

        <div class="section" id="topic1__section2">
<h2 class="title sectiontitle">概要</h2>
            
            <pre class="pre codeblock"><strong class="ph b">gpssh-exkeys</strong> <strong class="ph b">-f</strong> <var class="keyword varname">hostfile_exkeys</var> | <strong class="ph b">- h</strong> <var class="keyword varname">hostname</var> [<strong class="ph b">-h</strong> <var class="keyword varname">hostname</var> ...]
                
                <strong class="ph b">gpssh-exkeys</strong> <strong class="ph b">-e</strong> <var class="keyword varname">hostfile_exkeys</var> <strong class="ph b">-x</strong> <var class="keyword varname">hostfile_gpexpand</var>
                
                <strong class="ph b">gpssh-exkeys</strong> <strong class="ph b">-?</strong> 
                
                <strong class="ph b">gpssh-exkeys</strong> <strong class="ph b">--version</strong></pre>

        </div>

        <div class="section" id="topic1__section3">
<h2 class="title sectiontitle">描述</h2>
            
            <p class="p"><samp class="ph codeph">gpssh-exkeys</samp>工具在指定的主机名（或主机地址）之间交换SSH密钥。这允许
                Greenplum主机和网络接口之间的SSH连接，而不需要口令提示。该工具用于最初将Greenplum数据库
                系统准备好用于无口令的SSH访问，以及在扩展Greenplum数据库系统时添加额外的ssh密钥。
            </p>

            <p class="p">要指定参与初始SSH密钥交换的主机，请使用<samp class="ph codeph">-f</samp>选项指定包含主机名列表的文件
                （推荐），或使用<samp class="ph codeph">-h</samp>选项在命令行上指出单个主机名。至少需要一个主机名
                （<samp class="ph codeph">-h</samp>）或主机文件。请注意，本地主机默认包含在密钥交换中。</p>

            <p class="p">指定要添加到现有Greenplum数据库系统的新扩展主机，请使用<samp class="ph codeph">-e</samp>和<samp class="ph codeph">-x</samp>
                选项。<samp class="ph codeph">-e</samp>选项指定一个文件，其中包含系统中已有SSH密钥的现有主机列表。
                <samp class="ph codeph">-x</samp>选项指定一个文件，其中包含需要参与SSH密钥交换的新主机列表。
            </p>

            <p class="p">密钥要作为当前登录的用户交换。用户应该执行两次密钥交换过程：一次作为<samp class="ph codeph">root</samp>用户，
                一次作为<samp class="ph codeph">gpadmin</samp>用户（拥有Greenplum数据库安装的用户）。Greenplum数据库管理
                要求在Greenplum数据库系统的所有主机上创建相同的非root用户，并且这些工具必须能够以该用户的身份
                连接到所有主机而无需口令。
            </p>

            <p class="p"><samp class="ph codeph">gpssh-exkeys</samp>工具使用以下步骤执行密钥交换：</p>

            <ul class="ul">
                <li class="li" id="topic1__jw140375">为当前用户创建一个RSA标识密钥对（如果尚不存在）。该密钥对中的
                    公钥被添加到当前用户的<samp class="ph codeph">authorized_keys</samp>文件中。</li>

                <li class="li" id="topic1__jw140376">使用<samp class="ph codeph">-h</samp>、<samp class="ph codeph">-f</samp>、<samp class="ph codeph">-e</samp>
                    以及<samp class="ph codeph">-x</samp>选项指定的每台主机的主机密钥更新当前用户的
                    <samp class="ph codeph">known_hosts</samp>文件。</li>

                <li class="li" id="topic1__jw140377">使用<samp class="ph codeph">ssh</samp>连接到每个主机，并获取<samp class="ph codeph">authorized_keys</samp>、
                    <samp class="ph codeph">known_hosts</samp>和<samp class="ph codeph">id_rsa.pub</samp>文件以设置无口令访问。</li>

                <li class="li" id="topic1__jw140378">将从每个主机获取的<samp class="ph codeph">id_rsa.pub</samp>文件中的密钥添加到当前用户
                    的<samp class="ph codeph">authorized_keys</samp>文件中。</li>

                <li class="li" id="topic1__jw140379">使用新的主机信息（如果有）更新所有主机上的<samp class="ph codeph">authorized_keys</samp>、
                    <samp class="ph codeph">known_hosts</samp>和<samp class="ph codeph">id_rsa.pub</samp>文件。
                </li>

            </ul>

        </div>

        <div class="section" id="topic1__section4">
<h2 class="title sectiontitle">选项</h2>
            
            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">-e <var class="keyword varname">hostfile_exkeys</var>
</dt>

                    <dd class="dd pd">进行系统扩展时，这个选项指定包含<var class="keyword varname">当前</var>Greenplum系统中每台主机
                        （Master、后备Master和Segment）的所有已配置主机名和主机地址（接口名称）的文件的
                        名称和位置，每行一个名称，其中没有空行或额外的空格。这个文件中指定的主机不能出现在
                        <samp class="ph codeph">-x</samp>使用的主机文件中。</dd>

                
                
                    <dt class="dt pt dlterm">-f <var class="keyword varname">hostfile_exkeys</var>
</dt>

                    <dd class="dd pd">指定包含Greenplum系统中每台主机（Master、后备Master和Segment）的所有已配置主机名
                        和主机地址（接口名称）的文件的名称和位置，每行一个名称，其中没有空行或额外的空格。
                    </dd>

                
                
                    <dt class="dt pt dlterm">-h <var class="keyword varname">hostname</var>
</dt>

                    <dd class="dd pd">指定将参与SSH密钥交换的单个主机名（或主机地址）。用户可以多次使用<samp class="ph codeph">-h</samp>
                        选项来指定多个主机名和主机地址。</dd>

                
                
                    <dt class="dt pt dlterm">--version</dt>

                    <dd class="dd pd">显示此工具的版本。</dd>

                
                
                    <dt class="dt pt dlterm">-x <var class="keyword varname">hostfile_gpexpand</var>
</dt>

                    <dd class="dd pd">进行系统扩展时，这是一个文件的名称和位置，该文件包含要添加到Greenplum系统的
                        每台<var class="keyword varname">新Segment主机</var>的所有已配置主机名和主机地址（接口名称），
                        每行一个名称，其中没有空行或额外的空格。这个文件中指定的主机不能出现在
                        <samp class="ph codeph">-e</samp>使用的主机文件中。</dd>

                
                
                    <dt class="dt pt dlterm">-?（帮助）</dt>

                    <dd class="dd pd">显示在线帮助。</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section5">
<h2 class="title sectiontitle">示例</h2>
            
            <p class="p">在文件<samp class="ph codeph">hostfile_exkeys</samp>中列出的所有主机名和地址之间交换SSH密钥：</p>

            <pre class="pre codeblock">$ gpssh-exkeys -f hostfile_exkeys</pre>

            <p class="p">在主机<samp class="ph codeph">sdw1</samp>、<samp class="ph codeph">sdw2</samp>和<samp class="ph codeph">sdw3</samp>
                之间交换SSH密钥：</p>

            <pre class="pre codeblock">$ gpssh-exkeys -h sdw1 -h sdw2 -h sdw3</pre>

            <p class="p">在现有主机<samp class="ph codeph">sdw1</samp>、<samp class="ph codeph">sdw2</samp>和<samp class="ph codeph">sdw3</samp>，
                新主机<samp class="ph codeph">sdw4</samp>和<samp class="ph codeph">sdw5</samp>作为系统扩展操作的一部分：</p>

            <pre class="pre codeblock">$ cat hostfile_exkeys
                mdw
                mdw-1
                mdw-2
                smdw
                smdw-1
                smdw-2
                sdw1
                sdw1-1
                sdw1-2
                sdw2
                sdw2-1
                sdw2-2
                sdw3
                sdw3-1
                sdw3-2
                $ cat hostfile_gpexpand
                sdw4
                sdw4-1
                sdw4-2
                sdw5
                sdw5-1
                sdw5-2
                $ gpssh-exkeys -e hostfile_exkeys -x hostfile_gpexpand</pre>

        </div>

        <div class="section" id="topic1__section6">
<h2 class="title sectiontitle">另见</h2>
            
            <p class="p"><samp class="ph codeph"><a class="xref" href="gpssh.html#topic1">gpssh</a></samp>、<samp class="ph codeph"><a class="xref" href="gpscp.html#topic1">gpscp</a></samp></p>

        </div>

    </div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
