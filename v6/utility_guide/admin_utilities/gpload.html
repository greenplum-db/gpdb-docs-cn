<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      gpload |
    Greenplum Database Docs
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/images/favicon.ico' rel='shortcut icon'>

  <script src="/javascripts/all.js"></script>
  
</head>

<body class="x6-0 x6-0_utility_guide x6-0_utility_guide_admin_utilities x6-0_utility_guide_admin_utilities_gpload has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "greenplum.org";
    </script>

     
  <header class="header header-layout">
    <h1 class="logo">
      <a href="/">Greenplum Database Documentation</a>
    </h1>
    
    <div class="header-links js-bar-links">
      <div class="btn-menu" data-behavior="MenuMobile"></div>
      <div class="header-item"><a href="https://greenplum.org">Back to Greenplum Database</a></div>
      <div class="header-item">
        <a href="https://github.com/greenplum-db/gpdb/wiki">Wiki</a>
      </div>
      
    </div>
  </header>


    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="nav-container js-sidenav" role="navigation" >
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    
  <ul>
    
      <li class="">
        <a href="/6-0/utility_guide/../../6-0/homenav.html">Greenplum数据库® 6.0文档</a>
        

      </li>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/utility_guide.html">工具指南</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/admin_utilities/util_ref.html">管理工具参考</a>
        
  <ul>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/analyzedb.html">analyzedb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpactivatestandby.html">gpactivatestandby</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpaddmirrors.html">gpaddmirrors</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpbackup.html">gpbackup</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpcheck.html">gpcheck</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpcheckcat.html">gpcheckcat</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpcheckperf.html">gpcheckperf</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpconfig.html">gpconfig</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpdeletesystem.html">gpdeletesystem</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpexpand.html">gpexpand</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpfdist.html">gpfdist</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpinitstandby.html">gpinitstandby</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpinitsystem.html">gpinitsystem</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpload.html">gpload</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gplogfilter.html">gplogfilter</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpmapreduce.html">gpmapreduce</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpmovemirrors.html">gpmovemirrors</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpperfmon_install.html">gpperfmon_install</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gppkg.html">gppkg</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gprecoverseg.html">gprecoverseg</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpreload.html">gpreload</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gprestore.html">gprestore</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpscp.html">gpscp</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpseginstall.html">gpseginstall</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpssh.html">gpssh</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpssh-exkeys.html">gpssh-exkeys</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpstart.html">gpstart</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpstate.html">gpstate</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpstop.html">gpstop</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/gpsys.html">gpsys1</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/pgbouncer.html">pgbouncer</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/pgbouncer-ini.html">pgbouncer.ini</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/admin_utilities/pgbouncer-admin.html">pgbouncer-admin</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/../pxf/ref/pxf.html">pxf</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/../pxf/ref/pxf-cluster.html">pxf cluster</a>
        

      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/cli_ref.html">客户端工具参考</a>
        
  <ul>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/client_utilities/ClientUtilitySummary.html">客户端工具摘要</a>
        
  <ul>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/clusterdb.html">clusterdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/createdb.html">createdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/createlang.html">createlang</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/createuser.html">createuser</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/dropdb.html">dropdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/droplang.html">droplang</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/dropuser.html">dropuser</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_config.html">pg_config</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_dump.html">pg_dump</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_dumpall.html">pg_dumpall</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/pg_restore.html">pg_restore</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/psql.html">psql</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/reindexdb.html">reindexdb</a>
        

      </li>
    
      <li class="">
        <a href="/6-0/utility_guide/client_utilities/vacuumdb.html">vacuumdb</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
      <li class="has_submenu">
        <a href="/6-0/utility_guide/contrib-programs.html">附加程序</a>
        
  <ul>
    
      <li class="">
        <a href="https://www.postgresql.org/docs/9.4/pgupgrade.html">pg_upgrade</a>
        

      </li>
    
      <li class="">
        <a href="https://www.postgresql.org/docs/9.4/pgxlogdump.html">pg_xlogdump</a>
        

      </li>
    
  </ul>


      </li>
    
  </ul>


      </li>
    
  </ul>


  </div>
</div>

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" style="display: none;">
    gpload
  </h1>

          <div id="js-quick-links" >
            
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        

    <h1 class="title topictitle1">gpload</h1>

    <div class="body">
        <p class="p">按照一个YAML格式的控制文件的定义运行一个装载作业。</p>

        <div class="section" id="topic1__section2">
<h2 class="title sectiontitle">概要</h2>
            
            <pre class="pre codeblock"><strong class="ph b">gpload</strong> <strong class="ph b">-f</strong> <var class="keyword varname">control_file</var> [<strong class="ph b">-l</strong> <var class="keyword varname">log_file</var>] [<strong class="ph b">-h</strong> <var class="keyword varname">hostname</var>] [<strong class="ph b">-p</strong> <var class="keyword varname">port</var>] 
   [<strong class="ph b">-U</strong> <var class="keyword varname">username</var>] [<strong class="ph b">-d</strong> <var class="keyword varname">database</var>] [<strong class="ph b">-W</strong>] [<strong class="ph b">--gpfdist_timeout</strong> <var class="keyword varname">seconds</var>] 
   [<strong class="ph b">--no_auto_trans</strong>] [[<strong class="ph b">-v</strong> | <strong class="ph b">-V</strong>] [<strong class="ph b">-q</strong>]] [<strong class="ph b">-D</strong>]

<strong class="ph b">gpload</strong> <strong class="ph b">-?</strong> 

<strong class="ph b">gpload</strong> <strong class="ph b">--version</strong></pre>

        </div>

        <div class="section" id="topic1__section3">
<h2 class="title sectiontitle">先决条件</h2>
            
            <p class="p">要执行<samp class="ph codeph">gpload</samp>命令的客户机必须具有下列要求：</p>

            <ul class="ul">
                <li class="li" id="topic1__ke147914">Python 2.6.2或更新版本，装有<samp class="ph codeph">pygresql</samp> (Python的PostgreSQL接口包
                    )，和<samp class="ph codeph">pyyaml</samp>。注意Python及所需的Python库被包含在Greenplum数据库安装包中，
                    因此如果在<samp class="ph codeph">gpload</samp>运行的机器上安装有Greenplum数据库，用户就不需要单独安装Python。
                    <div class="note note">
<span class="notetitle">Note:</span> Greenplum数据库的Windows装载客户端仅支持Python 2.5(您可以从<a class="xref" href="https://www.python.org" target="_blank">https://www.python.org</a>获取)</div>
。</li>

                <li class="li" id="topic1__ke147925">
<samp class="ph codeph"><a class="xref" href="gpfdist.html#topic1">gpfdist</a></samp>并行文件分发程序被安装在<samp class="ph codeph">$PATH</samp>中。这个程序位于Greenplum
                        数据库的<samp class="ph codeph">$GPHOME/bin</samp>目录下。
                    </li>

                <li class="li" id="topic1__ke144650">gpload客户机可以访问（被访问）Greenplum数据库集群（Master和Segments）中所有主机。</li>

                <li class="li" id="topic1__ke145550">gpload客户及可以访问（被访问）所有可能用来装载数据的主机（ETL服务器）。</li>

            </ul>

        </div>

        <div class="section" id="topic1__section4">
<h2 class="title sectiontitle">描述</h2>
            
            <div class="p">
<samp class="ph codeph">gpload</samp>是一个数据装载工具，它扮演着Greenplum数据库外部表并行装载
                特性的接口的角色。通过一个用YAML格式控制文件定义的装载说明，<samp class="ph codeph">gpload</samp>
                调用Greenplum数据库的并行文件服务器
                (<samp class="ph codeph"><a class="xref" href="gpfdist.html">gpfdist</a></samp>)执行
                文件装载，基于源数据的定义创建一个外部表定义，并且指定<samp class="ph codeph">INSERT</samp>、
                <samp class="ph codeph">UPDATE</samp>或<samp class="ph codeph">MERGE</samp>操作把源数据装载到数据库中的目标表中。
                <div class="note note">
<span class="notetitle">Note:</span> <samp class="ph codeph">gpfdist</samp>和<samp class="ph codeph">gpload</samp>是在Greenplum的主版本级别有效的。
                    例如，Greenplum 4.x版本的<samp class="ph codeph">gpfdist</samp>不能用于Greenplum 5.x或6.x版本。
                </div>

                <div class="note note" id="topic1__gpload-limitation">
<span class="notetitle">Note:</span> 如果目标表的列名为保留关键字、有大写字母或包含任何双引号，
                    那么<samp class="ph codeph">MERGE</samp>和<samp class="ph codeph">UPDATE</samp>操作不被支持。
                </div>
</div>

            <p class="p">在目标表上指定多个同时的装载操作时，操作包括在YAML控制文件(控制文件格式见<a class="xref" href="#topic1__section7">控制文件格式</a>)的<samp class="ph codeph">SQL</samp>集合中指定的任何SQL命令会在单个事务中
                执行以防止数据不一致。
                </p>

        </div>

        <div class="section" id="topic1__section5">
<h2 class="title sectiontitle">选项</h2>
            
            <dl class="dl parml">
                
                    <dt class="dt pt dlterm">-f <var class="keyword varname">control_file</var>
</dt>

                    <dd class="dd pd">
<strong class="ph b">必选项。</strong>包含装载说明详情的YAML文件。请见
                        <a class="xref" href="#topic1__section7">控制文件格式</a>。</dd>

                
                
                    <dt class="dt pt dlterm">--gpfdist_timeout <var class="keyword varname">seconds</var>
</dt>

                    <dd class="dd pd">为<samp class="ph codeph">gpfdist</samp>并行文件分发程序发送响应设置超时时间。
                        输入一个从<samp class="ph codeph">0</samp>到<samp class="ph codeph">30</samp>秒的值（输入"<samp class="ph codeph">0</samp>"会禁用超时）。
                        注意在高流量网络上可能需要增加这个值。</dd>

                
                
                    <dt class="dt pt dlterm">-l <var class="keyword varname">log_file</var>
</dt>

                    <dd class="dd pd">指定在哪里写日志文件。默认是<samp class="ph codeph">~/gpAdminLogs/gpload_<var class="keyword varname">YYYYMMDD</var></samp>。
                        有关日志文件的更多信息请见<a class="xref" href="#topic1__section9">日志文件格式</a>。</dd>

                
                
                    <dt class="dt pt dlterm">--no_auto_trans</dt>

                    <dd class="dd pd">如果用户在目标表上执行单个装载操作，可指定<samp class="ph codeph">--no_auto_trans</samp>
                        禁用把装载操作作为单个事务处理的特性。
                        </dd>

                    <dd class="dd pd">默认情况下，在一个目标表上执行多个同时的操作时，<samp class="ph codeph">gpload</samp>把每个装载操作处理为
                        单个事务以防止不一致的数据。
                        </dd>

                
                
                    <dt class="dt pt dlterm">-q (无屏幕输出)</dt>

                    <dd class="dd pd">运行在静默模式中。命令输出不会被显示在屏幕上，但仍将被写入到日志文件。</dd>

                
                
                    <dt class="dt pt dlterm">-D (调试模式)</dt>

                    <dd class="dd pd">检查错误情况，但是不执行装载。</dd>

                
                
                    <dt class="dt pt dlterm">-v (详细模式)</dt>

                    <dd class="dd pd">在装载步骤被执行时，显示它们的详细输出。</dd>

                
                
                    <dt class="dt pt dlterm">-V (非常详细模式)</dt>

                    <dd class="dd pd">显示非常详细的输出。</dd>

                
                
                    <dt class="dt pt dlterm">-? (显示帮助)</dt>

                    <dd class="dd pd">显示帮助，然后退出。</dd>

                
                
                    <dt class="dt pt dlterm">--version</dt>

                    <dd class="dd pd">显示这个工具的版本，然后退出。</dd>

                
            </dl>

            <div class="sectiondiv">
                <strong class="ph b">连接选项</strong>
                <dl class="dl parml">
                    
                        <dt class="dt pt dlterm">-d <var class="keyword varname">database</var>
</dt>

                        <dd class="dd pd">要装载到的数据库。如果没有指定，则从装载控制文件、环境变量<samp class="ph codeph">$PGDATABASE</samp>
                            读取或者默认为当前系统用户名。
                            </dd>

                    
                    
                        <dt class="dt pt dlterm">-h <var class="keyword varname">hostname</var>
</dt>

                        <dd class="dd pd">指定Greenplum的Master数据库服务器在其上运行的机器的主机名。如果没有指定，
                            会从装载控制文件、环境变量<samp class="ph codeph">$PGHOST</samp>读取或者默认为
                            <samp class="ph codeph">localhost</samp>。
                            </dd>

                    
                    
                        <dt class="dt pt dlterm">-p <var class="keyword varname">port</var>
</dt>

                        <dd class="dd pd">指定Greenplum的Master数据库服务器在其上监听连接的TCP端口。如果没有指定，
                            会从装载控制文件、环境变量<samp class="ph codeph">$PGPORT</samp>读取或者默认为5432。</dd>

                    
                    
                        <dt class="dt pt dlterm">-U <var class="keyword varname">username</var>
</dt>

                        <dd class="dd pd">要用其进行连接的数据库角色名。如果没有指定，会从装载控制文件、环境变量<samp class="ph codeph">$PGUSER</samp>
                            读取或者默认为当前系统用户名。</dd>

                    
                    
                        <dt class="dt pt dlterm">-W (强制口令提示)</dt>

                        <dd class="dd pd">强制口令提示。如果没有指定，会从环境变量<samp class="ph codeph">$PGPASSWORD</samp>、
                            <samp class="ph codeph">$PGPASSFILE</samp>指定的口令文件或<samp class="ph codeph">~/.pgpass</samp>
                            中的口令文件中读取口令。如果这些都没有设置，即使没有提供<samp class="ph codeph">-W</samp>，
                            <samp class="ph codeph">gpload</samp>也将提示要求一个口令。</dd>

                    
                </dl>

            </div>
        </div>

        <div class="section" id="topic1__section7">
<h2 class="title sectiontitle">控制文件格式</h2>
            
            <p class="p"><samp class="ph codeph">gpload</samp>控制文件使用
                <a class="xref" href="http://yaml.org/spec/1.1/" target="_blank">YAML 1.1</a>
                文档格式，然后为定义Greenplum数据库装载操作的多个步骤实现了其自身的模式。
                该控制文件必须是一个有效的YAML文档。</p>

            <p class="p"><samp class="ph codeph">gpload</samp>程序按顺序处理控制文件文档并且使用缩进（空格）来判断文档层次以及
                各个部分之间的关系。空格的使用是有意义的。不能把空格简单地用于格式化目的，并且不能使用制表符。
               </p>

            <p class="p">一个装载控制文件的基础结构是：</p>

            <pre class="pre codeblock">---
<a class="xref" href="#topic1__cfversion">VERSION</a>: 1.0.0.1
<a class="xref" href="#topic1__cfdatabase">DATABASE</a>: <var class="keyword varname">db_name</var>
<a class="xref" href="#topic1__cfuser">USER</a>: <var class="keyword varname">db_username</var>
<a class="xref" href="#topic1__cfhost">HOST</a>: <var class="keyword varname">master_hostname</var>
<a class="xref" href="#topic1__cfport">PORT</a>: <var class="keyword varname">master_port</var>
<a class="xref" href="#topic1__cfgpload">GPLOAD</a>:
   <a class="xref" href="#topic1__cfinput">INPUT</a>:
    - <a class="xref" href="#topic1__cfsource">SOURCE</a>:
         <a class="xref" href="#topic1__cfsourcelocalname">LOCAL_HOSTNAME</a>:
           - <var class="keyword varname">hostname_or_ip</var>
         <a class="xref" href="#topic1__cfsourceport">PORT</a>: <var class="keyword varname">http_port</var>
       | <a class="xref" href="#topic1__cfversion">PORT_RANGE</a>: [<var class="keyword varname">start_port_range</var>, <var class="keyword varname">end_port_range</var>]
         <a class="xref" href="#topic1__cfsourcefile">FILE</a>: 
           - <var class="keyword varname">/path/to/input_file</var>
         <a class="xref" href="#topic1__cfsourcessl">SSL</a>: true | false
         <a class="xref" href="#topic1__cfsourcecertificatespath">CERTIFICATES_PATH</a>: <var class="keyword varname">/path/to/certificates</var>
    - <a class="xref" href="#topic1__fqdn">FULLY_QUALIFIED_DOMAIN_NAME</a>: true | false
    - <a class="xref" href="#topic1__cfcolumns">COLUMNS</a>:
           - <var class="keyword varname">field_name</var>: <var class="keyword varname">data_type</var>
    - <a class="xref" href="#topic1__cftransform">TRANSFORM</a>: '<var class="keyword varname">transformation</var>'
    - <a class="xref" href="#topic1__cftransformconfig">TRANSFORM_CONFIG</a>: '<var class="keyword varname">configuration-file-path</var>' 
    - <a class="xref" href="#topic1__cfmaxlinelength">MAX_LINE_LENGTH</a>: <var class="keyword varname">integer</var> 
    - <a class="xref" href="#topic1__cfformat">FORMAT</a>: text | csv
    - <a class="xref" href="#topic1__cfdelimiter">DELIMITER</a>: '<var class="keyword varname">delimiter_character</var>'
    - <a class="xref" href="#topic1__cfescape">ESCAPE</a>: '<var class="keyword varname">escape_character</var>' | 'OFF'
    - <a class="xref" href="#topic1__cfnullas">NULL_AS</a>: '<var class="keyword varname">null_string</var>'
    - <a class="xref" href="#topic1__cfforcenotnull">FORCE_NOT_NULL</a>: true | false
    - <a class="xref" href="#topic1__cfquote">QUOTE</a>: '<var class="keyword varname">csv_quote_character</var>'
    - <a class="xref" href="#topic1__cfheader">HEADER</a>: true | false
    - <a class="xref" href="#topic1__cfencoding">ENCODING</a>: <var class="keyword varname">database_encoding</var>
    - <a class="xref" href="#topic1__cferrorlimit">ERROR_LIMIT</a>: <var class="keyword varname">integer</var>
    - <a class="xref" href="#topic1__cferrorlog">LOG_ERRORS</a>: true | false
   <a class="xref" href="#topic1__cfexternal">EXTERNAL</a>:
      - <a class="xref" href="#topic1__cfschema">SCHEMA</a>: <var class="keyword varname">schema</var> | '%'
   <a class="xref" href="#topic1__cfoutput">OUTPUT</a>:
    - <a class="xref" href="#topic1__cftable">TABLE</a>: <var class="keyword varname">schema.table_name</var>
    - <a class="xref" href="#topic1__cfmode">MODE</a>: insert | update | merge
    - <a class="xref" href="#topic1__cfmatchcolumns">MATCH_COLUMNS</a>:
           - <var class="keyword varname">target_column_name</var>
    - <a class="xref" href="#topic1__cfupdatecolumns">UPDATE_COLUMNS</a>:
           - <var class="keyword varname">target_column_name</var>
    - <a class="xref" href="#topic1__cfupdatecondition">UPDATE_CONDITION</a>: '<var class="keyword varname">boolean_condition</var>'
    - <a class="xref" href="#topic1__cfmapping">MAPPING</a>:
              <var class="keyword varname">target_column_name</var>: <var class="keyword varname">source_column_name</var> | '<var class="keyword varname">expression</var>'
   <a class="xref" href="#topic1__cfpreload">PRELOAD</a>:
    - <a class="xref" href="#topic1__cftruncate">TRUNCATE</a>: true | false
    - <a class="xref" href="#topic1__cfreusetables">REUSE_TABLES</a>: true | false
    - <a class="xref" href="#topic1__cfstagetbl">STAGING_TABLE</a>: <var class="keyword varname">external_table_name</var>
    - <a class="xref" href="#topic1__cffastmatch">FAST_MATCH</a>: true | false
   <a class="xref" href="#topic1__cfsql">SQL</a>:
    - <a class="xref" href="#topic1__cfbefore">BEFORE</a>: "<var class="keyword varname">sql_command</var>"
    - <a class="xref" href="#topic1__cfafter">AFTER</a>: "<var class="keyword varname">sql_command</var>"</pre>

            <dl class="dl parml">
                
                    <dt class="dt pt dlterm" id="topic1__cfversion">VERSION</dt>

                    <dd class="dd pd">可选。<samp class="ph codeph">gpload</samp>控制文件模式的版本。当前版本是1.0.0.1。</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfdatabase">DATABASE</dt>

                    <dd class="dd pd">可选。指定Greenplum数据库系统要连接到哪个数据库。如果没有指定则默认为<samp class="ph codeph">$PGDATABASE</samp>。
                        如果<samp class="ph codeph">$PGDATABASE</samp>也没有设置，则默认为当前系统用户名。用户还可以在命令行上用
                        <samp class="ph codeph">-d</samp>选项指定数据库。</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfuser">USER</dt>

                    <dd class="dd pd">可选。指定用于连接的数据库角色。如果没有指定，默认为当前用户或者<samp class="ph codeph">$PGUSER</samp>
                        （如果设置）。用户还可以在命令行上用<samp class="ph codeph">-U</samp>选项指定数据库角色。
                        </dd>

                    <dd class="dd pd">如果运行<samp class="ph codeph">gpload</samp>的用户不是Greenplum数据库的超级用户，
                        那么必须为该用户授予适当的权限。更多信息请见<cite class="cite">Greenplum数据库参考指南</cite>。
                    </dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfhost">HOST</dt>

                    <dd class="dd pd">可选。指定Greenplum数据库的Master主机名。如果没有指定，默认为localhost或者
                        <samp class="ph codeph">$PGHOST</samp>（如果设置）。用户还可以在命令行上用<samp class="ph codeph">-h</samp>
                        选项指定Master主机名。</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfport">PORT</dt>

                    <dd class="dd pd">可选。指定Greenplum数据库的Master端口。如果没有指定，默认为5432或者
                        <samp class="ph codeph">$PGPORT</samp>（如果设置）。用户还可以在命令行上用<samp class="ph codeph">-p</samp>
                        选项指定Master端口。</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfgpload">GPLOAD</dt>

                    <dd class="dd pd">必需。开始装载说明部分。<samp class="ph codeph">GPLOAD</samp>说明必须定义有一个<samp class="ph codeph">INPUT</samp>
                        小节和一个<samp class="ph codeph">OUTPUT</samp>小节。
                        <dl class="dl parml">
                            
                                <dt class="dt pt dlterm" id="topic1__cfinput">INPUT</dt>

                                <dd class="dd pd">必需。定义要装载的输入数据的位置和格式。<samp class="ph codeph">gpload</samp>
                                    将在当前主机上启动<samp class="ph codeph"><a class="xref" href="gpfdist.html#topic1">gpfdist</a></samp>文件分布程序的一个或者更多
                                    实例并且在Greenplum数据库中创建指向源数据的外部表定义。注意在其上运行
                                    <samp class="ph codeph">gpload</samp>的主机必须对所有的Greenplum数据库主机（Master和Segment）
                                    通过网络可访问。
                                    <dl class="dl parml">
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfsource">SOURCE</dt>

                                            <dd class="dd pd">必需。<samp class="ph codeph">INPUT</samp>说明的<samp class="ph codeph">SOURCE</samp>块定义源文件的位置。
                                                一个<samp class="ph codeph">INPUT</samp>小节可以定义多个<samp class="ph codeph">SOURCE</samp>块。每个定义
                                                的<samp class="ph codeph">SOURCE</samp>块对应于将在本地机器上启动的一个<samp class="ph codeph"><a class="xref" href="gpfdist.html#topic1">gpfdist</a></samp>文件分布程序的实例。
                                                每个定义的<samp class="ph codeph">SOURCE</samp>块必须有一个<samp class="ph codeph">FILE</samp>说明。
                                                <p class="p">
                                                    更多关于使用<samp class="ph codeph">gpfdist</samp>并行文件服务器和单个以及多个
                                                    <samp class="ph codeph">gpfdist</samp>实例的信息，请见<cite class="cite">Greenplum数据库管理员指南</cite>
                                                    中的“装载和卸载数据”部分。
                                                  </p>
<dl class="dl parml">
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcelocalname">LOCAL_HOSTNAME</dt>

                                                      <dd class="dd pd">可选。指定<samp class="ph codeph">gpload</samp>运行其上的本地机器
                                                  的主机名或者IP地址。如果这个机器被配置有多个网络接口卡（NICs），
                                                  用户可以指定每块NIC的主机名或者IP，以便允许网络流量同时使用所有的NIC。
                                                  默认是仅使用本地机器的主要主机名或者IP。
                                                 </dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourceport">PORT</dt>

                                                  <dd class="dd pd">
                                                      可选。指定<samp class="ph codeph"><a class="xref" href="gpfdist.html#topic1">gpfdist</a></samp>
                                                      文件分布程序应该使用的特定端口号。用户还可以提供一个<samp class="ph codeph">PORT_RANGE</samp>
                                                      来从指定的范围中选择可用的端口。如果<samp class="ph codeph">PORT</samp>和
                                                      <samp class="ph codeph">PORT_RANGE</samp>同时被定义，那么<samp class="ph codeph">PORT</samp>优先。
                                                      如果<samp class="ph codeph">PORT</samp>和<samp class="ph codeph">PORT_RANGE</samp>都没有定义，
                                                      默认为在8000和9000之间选择一个可用端口。
                                                 <p class="p">
                                                     如果在<samp class="ph codeph">LOCAL_HOSTNAME</samp>中声明多个主机名，
                                                     这个端口号被用于所有主机。如果用户想要使用所有的NICs装载一个给定目录位置的同一个
                                                     文件或者文件集合，这种配置就是用户想要的。
                                                  </p>
</dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourceportrange">PORT_RANGE</dt>

                                                      <dd class="dd pd">可选。可被用来代替<samp class="ph codeph">PORT</samp>提供一个端口号范围，
                                                          <samp class="ph codeph">gpload</samp>可以从其中为这个<samp class="ph codeph"><a class="xref" href="gpfdist.html#topic1">gpfdist</a></samp>
                                                          文件分布程序实例选择一个可用的端口。
                                                      </dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcefile">FILE</dt>

                                                      <dd class="dd pd">必需。指定本地文件系统上的一个文件位置、命名管道或者目录位置，
                                                          其中包含要被装载的数据。用户可以声明多于一个文件，
                                                          只要所有指定文件中数据的格式相同。
                                                  <p class="p">如果这些文件被使用<samp class="ph codeph">gzip</samp>或者<samp class="ph codeph">bzip2</samp>
                                                      （有<samp class="ph codeph">.gz</samp>或者<samp class="ph codeph">.bz2</samp>文件扩展名）压缩，
                                                      这些文件将被自动解压缩（在用户路径中有<samp class="ph codeph">gunzip</samp>或者
                                                      <samp class="ph codeph">bunzip2</samp>）。
                                                  </p>

                                                  <p class="p">
                                                      在指定要装载哪些源文件时，用户可以使用通配符（<samp class="ph codeph">*</samp>）
                                                      或其他C风格的模式匹配来指示多个文件。被指定的文件假定在相对于<samp class="ph codeph">gpload</samp>
                                                      被执行的当前目录的位置（或者用户可以声明绝对路径）。
                                                  </p>
</dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcessl">SSL</dt>

                                                      <dd class="dd pd">可选。指定<samp class="ph codeph">SSL</samp>加密的使用。
                                                          如果<samp class="ph codeph">SSL</samp>被设置为true，<samp class="ph codeph">gpload</samp>
                                                          用<samp class="ph codeph">--ssl</samp>启动<samp class="ph codeph">gpfdist</samp>
                                                          服务器并且使用<samp class="ph codeph">gpfdists://</samp>协议。
                                                   </dd>

                                                  
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfsourcecertificatespath">CERTIFICATES_PATH</dt>

                                                      <dd class="dd pd">当SSL为<samp class="ph codeph">true</samp>时必需；
                                                          当SSL为<samp class="ph codeph">false</samp>或者没有指定时
                                                          不能指定这个参数。<samp class="ph codeph">CERTIFICATES_PATH</samp>
                                                          中指定的位置必须包含下列文件：
                                                     
                                                 <ul class="ul" id="topic1__ul_azs_eau_mo">
                                                     <li class="li" id="topic1__ke148142">服务器证书文件
                                                  <samp class="ph codeph">server.crt</samp>
</li>

                                                     <li class="li" id="topic1__ke148143">服务器私钥文件
                                                  <samp class="ph codeph">server.key</samp>
</li>

                                                     <li class="li" id="topic1__ke148144">可信证书授权
                                                         <samp class="ph codeph">root.crt</samp>
</li>

                                                 </ul>
<p class="p">根目录(<samp class="ph codeph">/</samp>)
                                                     不能被指定为
                                                  <samp class="ph codeph">CERTIFICATES_PATH</samp>。</p>
</dd>

                                                  
                                                </dl>
</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__fqdn">FULLY_QUALIFIED_DOMAIN_NAME</dt>

                                            <dd class="dd pd">可选。指定<samp class="ph codeph">gpload</samp>是否把主机名解析成完全限定的域名
                                                （FQDN）或者本地主机名。如果值被设置为<samp class="ph codeph">true</samp>，
                                                名称会被解析到FQDN。如果该值被设置为<samp class="ph codeph">false</samp>，
                                                则解析到本地主机名。默认是<samp class="ph codeph">false</samp>。
                                                <p class="p">在某些情况下可能要求一个完全限定的域名。例如，如果Greenplum
                                                    数据库系统在与ETL应用不同的域且该域能够被<samp class="ph codeph">gpload</samp>访问。
                                                 </p>
</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfcolumns">COLUMNS</dt>

                                            <dd class="dd pd">可选。以<samp class="ph codeph"><var class="keyword varname">field_name</var>:<var class="keyword varname">data_type</var></samp>
                                                这样的格式指定源数据文件的模式。源文件中的<samp class="ph codeph">DELIMITER</samp>
                                                字符是分隔两个数据值域（列）的东西。一行由一个换行字符（<samp class="ph codeph">0x0a</samp>决定）。
                                                <p class="p">如果输入<samp class="ph codeph">COLUMNS</samp>没有指定，则使用输出<samp class="ph codeph">TABLE</samp>的模式，
                                                    意味着源数据必须与目标表具有相同的列序、列数以及数据格式。
                                                </p>
<p class="p">默认的source-to-target映射基于这一节定义的列名与目标<samp class="ph codeph">TABLE</samp>
                                                    中列名之间的匹配。默认映射可以使用<samp class="ph codeph">MAPPING</samp>小节覆盖。
                                                    </p>
</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cftransform">TRANSFORM</dt>

                                            <dd class="dd pd">可选。指定传递给<samp class="ph codeph">gpload</samp>的输入转换的名字。
                                                有关XML转换的信息，请见<cite class="cite">Greenplum数据库管理员指南</cite>
                                                中的“装载和卸载数据”。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cftransformconfig">TRANSFORM_CONFIG</dt>

                                            <dd class="dd pd">当<samp class="ph codeph">TRANSFORM</samp>被指定时，这个元素是必需的。
                                                指定在上面<samp class="ph codeph">TRANSFORM</samp>参数中指定的转换的
                                                配置文件位置。
                                            </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfmaxlinelength">MAX_LINE_LENGTH</dt>

                                            <dd class="dd pd">可选。一个整数，指定传递给<samp class="ph codeph">gpload</samp>
                                                的XML转换数据中一行的最大长度。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfformat">FORMAT</dt>

                                            <dd class="dd pd">可选。指定源数据文件的格式：纯文本（<samp class="ph codeph">TEXT</samp>）格式，
                                                逗号分隔值（<samp class="ph codeph">CSV</samp>）格式。如果没有指定，这个默认为
                                                <samp class="ph codeph">TEXT</samp>。更多有关源数据格式的信息，请见<cite class="cite">
                                                    Greenplum数据库管理员指南</cite>中的“装载和卸载数据”。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfdelimiter">DELIMITER</dt>

                                            <dd class="dd pd">可选。指定在每行数据内分隔列的单个ASCII字符。在TEXT模式中默认是一个制表符，
                                                在CSV模式中默认是一个逗号。用户还可以指定一个非可打印ASCII字符或者非可打印
                                                Unicode字符，例如：<samp class="ph codeph">"\x1B"</samp>或者<samp class="ph codeph"> "\u001B"</samp>。
                                                对于非可打印字符也支持转义字符串语法<samp class="ph codeph">E'<var class="keyword varname">character-code</var>'</samp>。
                                                ASCII或Unicode字符必须被封闭在单引号中。例如：<samp class="ph codeph">E'\x1B'</samp>或者
                                                <samp class="ph codeph">E'\u001B'</samp>。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfescape">ESCAPE</dt>

                                            <dd class="dd pd">指定用于C转义序列（例如<samp class="ph codeph">\n</samp>、<samp class="ph codeph">\t</samp>、
                                                <samp class="ph codeph">\100</samp>等等）以及转义可能被当作行列定界符的数据字符的
                                                单个字符。确保选择一个在实际列数据中任何地方都没有使用的转义字符。文本
                                                格式文件的默认转义字符是一个\（反斜线），csv格式文件的默认转义字符是
                                                一个<samp class="ph codeph">"</samp>（双引号）。不过可以指定另一个字符来表示转义。
                                                还可以在文本格式文件中通过指定<samp class="ph codeph">'OFF'</samp>值作为转义值来
                                                禁用转义。这对于其中嵌有很多不准备作为转义字符的反斜线的文本格式的Web
                                                日志数据非常有用。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfnullas">NULL_AS</dt>

                                            <dd class="dd pd">可选。指定表示空值的字符串。TEXT模式中默认是<samp class="ph codeph">\N</samp>
                                                （反斜线-N），<samp class="ph codeph">CSV</samp>模式中默认是没有引用的空的值。
                                                即便在<samp class="ph codeph">TEXT</samp>模式中，对于想要把空值与空字符串区分
                                                开来的情况，用户也可以使用空字符串。任何匹配这个字符串的源数据项将
                                                被认为是一个空值。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfforcenotnull">FORCE_NOT_NULL</dt>

                                            <dd class="dd pd">可选。在CSV模式中，处理每个被指定的列，仿佛它被引用并且因此
                                                不是一个NULL值。对于CSV模式中的默认空值字符串（两个定界符之
                                                间什么都没有），这导致缺失的值被计算为长度为零的字符串。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfquote">QUOTE</dt>

                                            <dd class="dd pd">当<samp class="ph codeph">FORMAT</samp>是<samp class="ph codeph">CSV</samp>时，
                                                这个元素是必需的。为<samp class="ph codeph">CSV</samp>模式指定引用
                                                字符。默认是双引号（<samp class="ph codeph">"</samp>）。
                                            </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfheader">HEADER</dt>

                                            <dd class="dd pd">可选。指定数据文件中的第一行是一个头部行（包含列名）并且不
                                                应被包括在要被装载的数据中。如果使用多个数据源文件，所有的
                                                文件必须有一个头部行。默认是假定输入文件没有头部行。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfencoding">ENCODING</dt>

                                            <dd class="dd pd">可选。源数据的字符集编码。可指定一个字符串常量（例如<samp class="ph codeph">'SQL_ASCII'</samp>）、
                                                一个整数编码编号，或者指定<samp class="ph codeph">'DEFAULT'</samp>以使用默认客户端编码。
                                                如果没有指定，默认的客户端编码会被使用。有关支持的字符集的信息，
                                                请见<cite class="cite">Greenplum数据库参考指南</cite>。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cferrorlimit">ERROR_LIMIT</dt>

                                            <dd class="dd pd">可选。为这个装载操作启用单行错误隔离模式。当被启用时，
                                                在输入被处理期间只要没有达到错误限制计数，任何Greenplum数据库
                                                Segment会抛弃有格式错误的输入行。如果错误限制没有达到，所有
                                                好的行将会被装载并且任何错误行都将被抛弃或者被捕捉在错误日志
                                                信息中。默认是在遇到第一个错误时中止装载操作。注意单行错误隔离
                                                只适用于有格式错误的数据行，例如有额外或者缺失的属性、有错误
                                                数据类型的属性或者有无效的客户端编码序列。如果遇到约束错误
                                                （例如主键约束）仍将导致装载操作中止。有关处理装载错误的信息，
                                                请见<cite class="cite">Greenplum数据库管理员指南</cite>中的“装载和卸载数据”。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cferrorlog">LOG_ERRORS</dt>

                                            <dd class="dd pd">当<samp class="ph codeph">ERROR_LIMIT</samp>被声明时，这个元素是可选的。
                                                值可以是<samp class="ph codeph">true</samp>或者<samp class="ph codeph">false</samp>。
                                                默认值是<samp class="ph codeph">false</samp>。如果值是<samp class="ph codeph">true</samp>，
                                                当运行在单行错误隔离模式中时，格式错误的行会被内部记录下来。
                                                用户可以用Greenplum数据库的内建SQL函数<samp class="ph codeph">gp_read_error_log('<var class="keyword varname">table_name</var>')</samp>
                                                检查格式错误。如果在装载数据时检测到格式错误，<samp class="ph codeph">gpload</samp>
                                                会用包含错误信息的表的名字生成一个警告消息，看起来类似于这个消息。
                                                <pre class="pre codeblock"><var class="keyword varname">timestamp</var>|WARN|1 bad row, please use GPDB built-in function gp_read_error_log('<span class="keyword parmname">table-name</span>') 
   to access the detailed error row</pre>
</dd>

                                            <dd class="dd pd">如果<samp class="ph codeph">LOG_ERRORS: true</samp>被指定，必须指定<samp class="ph codeph">REUSE_TABLES: true</samp>
                                                以便在Greenplum数据库的错误日志中保留格式错误。如果没有指定<samp class="ph codeph">REUSE_TABLES: true</samp>，
                                                错误信息会在<samp class="ph codeph">gpload</samp>操作后被删除。只有关于格式错误的总结信息会被返回。
                                                用户可以用Greenplum数据库的函数<samp class="ph codeph">gp_truncate_error_log()</samp>从错误日志
                                                中删除格式错误。</dd>

                                            <dd class="dd pd">更多有关处理装载错误的信息，请见<cite class="cite">Greenplum数据库管理员指南</cite>中的“装载和卸载数据”。
                                                有关<samp class="ph codeph">gp_read_error_log()</samp>函数的信息，请见<cite class="cite">Greenplum数据库参考指南</cite>
                                                中的<samp class="ph codeph">CREATE EXTERNAL TABLE</samp>命令。
                                              </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfexternal">EXTERNAL</dt>

                                            <dd class="dd pd">可选。定义<samp class="ph codeph">gpload</samp>创建的外部表数据库对象所属的方案。
                                                </dd>

                                            <dd class="dd pd">默认是使用Greenplum数据库的<samp class="ph codeph">search_path</samp>。
                                                  </dd>

                                            <dd class="dd pd">
                                                <dl class="dl parml">
                                                  
                                                  <dt class="dt pt dlterm" id="topic1__cfschema">SCHEMA</dt>

                                                      <dd class="dd pd">当<samp class="ph codeph">EXTERNAL</samp>被声明时，这个元素是必需的。
                                                          外部表所在的方案的名称。如果该方案不存在，会返回一个错误。
                                                     </dd>

                                                      <dd class="dd pd">
                                                          如果<samp class="ph codeph">%</samp>（百分号字符）被指定，
                                                          会使用<samp class="ph codeph">OUTPUT</samp>小节中<samp class="ph codeph">TABLE</samp>
                                                          指定的表名的方案。如果这个表名没有指定一个方案，则会使用默认方案。
                                                     </dd>

                                                  
                                                </dl>

                                            </dd>

                                        
                                    </dl>
</dd>

                            
                            
                                <dt class="dt pt dlterm" id="topic1__cfoutput">OUTPUT</dt>

                                <dd class="dd pd">必需。定义要被装载到数据库中的目标表和最终数据列值。
                                    <dl class="dl parml">
                                        
                                            <dt class="dt pt dlterm" id="topic1__cftable">TABLE</dt>

                                            <dd class="dd pd">必需。要装载到其中的目标表名。</dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfmode">MODE</dt>

                                            <dd class="dd pd">可选。如果没有指定，则默认为<samp class="ph codeph">INSERT</samp>。
                                                有三种可用的装载模式：
                                               </dd>

                                            <dd class="dd pd">
<span class="keyword option">INSERT</span> - 使用下列方法装载数据到目标表中：
                                                <pre class="pre codeblock">INSERT INTO <var class="keyword varname">target_table</var> SELECT * FROM <var class="keyword varname">input_data</var>;</pre>
</dd>

                                            <dd class="dd pd">
<span class="keyword option">UPDATE</span> - 更新目标表中<samp class="ph codeph">MATCH_COLUMNS</samp>
                                                属性值等于输入数据并且<samp class="ph codeph">UPDATE_CONDITION</samp>为true（可选条件）
                                                的行的<samp class="ph codeph">UPDATE_COLUMNS</samp>。如果目标表的列名为保留关键字、
                                                有大写字母或包含双引号（" "），那么不支持<samp class="ph codeph">UPDATE</samp>。
                                                 </dd>

                                            <dd class="dd pd">
<span class="keyword option">MERGE</span> - 插入新行并且更新<samp class="ph codeph">FOOBAR</samp>
                                                属性值等于相应输入数据而且<samp class="ph codeph">MATCH_COLUMNS</samp>为true
                                                （可选条件）的已有行的<samp class="ph codeph">UPDATE_COLUMNS</samp>。当源数据
                                                中的<samp class="ph codeph">MATCH_COLUMNS</samp>值在目标表数据中没有相应值时会
                                                被标识成新行。在那种情况下，源文件中的<strong class="ph b">整个行</strong>会被插入，而不仅仅
                                                是<samp class="ph codeph">MATCH</samp>和<samp class="ph codeph">UPDATE</samp>列。如果有多个
                                                相等的新<samp class="ph codeph">MATCH_COLUMNS</samp>值，只有其中一个新行将被插入。
                                                使用<samp class="ph codeph">UPDATE_CONDITION</samp>可过滤掉要抛弃的行。
                                                如果目标表的列名为保留关键字、
                                                有大写字母或包含双引号（" "），那么不支持<samp class="ph codeph">MERGE</samp>。
                                                 </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfmatchcolumns">MATCH_COLUMNS</dt>

                                            <dd class="dd pd">如果<samp class="ph codeph">MODE</samp>为<samp class="ph codeph">UPDATE</samp>或者
                                                <samp class="ph codeph">MERGE</samp>，则这个元素是必需的。指定被用作更新
                                                的连接条件的列。对于要在目标表中更新的行，指定目标列中的属性值
                                                必须等于相应的源数据列值。
                                                </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfupdatecolumns">UPDATE_COLUMNS</dt>

                                            <dd class="dd pd">如果<samp class="ph codeph">MODE</samp>为<samp class="ph codeph">UPDATE</samp>
                                                或者<samp class="ph codeph">MERGE</samp>，则这个元素是必需的。指定对
                                                符合<samp class="ph codeph">MATCH_COLUMNS</samp>条件和可选
                                                <samp class="ph codeph">UPDATE_CONDITION</samp>的行要更新的列。
                                            </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfupdatecondition">UPDATE_CONDITION</dt>

                                            <dd class="dd pd">可选。指定目标表中要被更新的行（在<samp class="ph codeph">MERGE</samp>
                                                情况下是要被插入的行）必须满足的一个布尔条件（类似于在
                                                <samp class="ph codeph">WHERE</samp>子句中声明的那样）。
                                               </dd>

                                        
                                        
                                            <dt class="dt pt dlterm" id="topic1__cfmapping">MAPPING</dt>

                                            <dd class="dd pd">可选。如果指定一个映射，它会覆盖默认的source-to-target列映射。
                                                默认的source-to-target映射基于源<samp class="ph codeph">COLUMNS</samp>
                                                小节定义的列名与目标<samp class="ph codeph">TABLE</samp>中列名之间的匹配。
                                                映射可以被指定为：
                                                </dd>

                                            <dd class="dd pd"><samp class="ph codeph"><var class="keyword varname">target_column_name</var>:
                                                  <var class="keyword varname">source_column_name</var></samp></dd>

                                            <dd class="dd pd">或者</dd>

                                            <dd class="dd pd"><samp class="ph codeph"><var class="keyword varname">target_column_name</var>:
                                                  '<var class="keyword varname">expression</var>'</samp></dd>

                                            <dd class="dd pd">其中<var class="keyword varname">expression</var>是在查询的<samp class="ph codeph">SELECT</samp>
                                                列表中指定的任意表达式，例如常量值、列引用、操作符调用、函数调用等等。
                                                </dd>

                                        
                                    </dl>
</dd>

                            
                        </dl>
</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfpreload">PRELOAD</dt>

                    <dd class="dd pd">可选。指定在装载操作之前运行的操作。目前唯一的预装载操作是<samp class="ph codeph">TRUNCATE</samp>。
                        <dl class="dl parml">
                            
                                <dt class="dt pt dlterm" id="topic1__cftruncate">TRUNCATE</dt>

                                <dd class="dd pd">可选。如果设置为true，<samp class="ph codeph">gpload</samp>将在装载目标表之前
                                    移除其中所有的行。</dd>

                            
                            
                                <dt class="dt pt dlterm" id="topic1__cfreusetables">REUSE_TABLES</dt>

                                <dd class="dd pd">可选。如果设置为true，<samp class="ph codeph">gpload</samp>将不会删除它创建的外部表
                                    对象和阶段性对象。这些对象将被重用于未来使用同一装载说明的装载操作。这会
                                    提高小型装载的性能（正在进行的到同一目标表的小型装载）。
                                    </dd>

                                <dd class="dd pd">如果<samp class="ph codeph">LOG_ERRORS: true</samp>被指定，<samp class="ph codeph">REUSE_TABLES: true</samp>
                                    必须被指定以保留Greenplum数据库错误日志中的格式错误。如果<samp class="ph codeph">REUSE_TABLES: true</samp>
                                    没有被指定，格式错误信息会在<samp class="ph codeph">gpload</samp>操作之后被删除。</dd>

                                <dd class="dd pd">如果<var class="keyword varname">external_table_name</var>存在，工具会使用存在的表。
                                    如果<samp class="ph codeph">OUTPUT</samp>表结构与数据库中表结构不吻合，工具会返回错误。
                                </dd>

                            
                            
                                <dt class="dt pt dlterm" id="topic1__cfstagetbl">STAGING_TABLE</dt>

                                <dd class="dd pd">可选。指定<samp class="ph codeph">gpload</samp>操作过程中创建的临时外部表的名称。
                                    该外部表会被<samp class="ph codeph">gpfdist</samp>使用。
                                        <samp class="ph codeph">REUSE_TABLES: true</samp>必须被指定。如果
                                        <samp class="ph codeph">REUSE_TABLES</samp>为false或没有指定，
                                        <samp class="ph codeph">STAGING_TABLE</samp>会被忽略。默认情况下，
                                        <samp class="ph codeph">gpload</samp>会采用随机名称创建一个临时外部表。</dd>

                                <dd class="dd pd">如果<var class="keyword varname">external_table_name</var>包含点号(.)，
                                        <samp class="ph codeph">gpload</samp>会返回错误。如果表已经存在，工具会使用该表。
                                    如果表的结构与<samp class="ph codeph">OUTPUT</samp>表定义的结构不匹配，工具会返回错误。
                                </dd>

                                <dd class="dd pd">工具会使用<samp class="ph codeph">EXTERNAL</samp>部分定义的<samp class="ph codeph"><a class="xref" href="#topic1__cfschema">SCHEMA</a></samp>值作为
                                    <var class="keyword varname">external_table_name</var>。如果
                                        <samp class="ph codeph">SCHEMA</samp>的值为<samp class="ph codeph">%</samp>，
                                    <var class="keyword varname">external_table_name</var>的名字会和目标表相同，
                                    <samp class="ph codeph"><a class="xref" href="#topic1__cftable">TABLE</a></samp>的表结构与<samp class="ph codeph">OUTPUT</samp>
                                    部分定义的相同。</dd>

                                <dd class="dd pd">如果没有设置<samp class="ph codeph">SCHEMA</samp>，工具会在数据库中搜索表
                                    (在<samp class="ph codeph">search_path</samp>中定义的模式下)，如果找不到该表
                                    ，<var class="keyword varname">external_table_name</var>表会在<samp class="ph codeph">PUBLIC</samp>
                                    模式下被创建。</dd>

                            
                            
                                <dt class="dt pt dlterm" id="topic1__cffastmatch">FAST_MATCH</dt>

                                <dd class="dd pd">可选项。如果设置为true，在重用外部表时，<samp class="ph codeph">gpload</samp>仅
                                    搜索匹配外部表对象的数据库。工具不会从<samp class="ph codeph">pg_attribute</samp>
                                    检查外部表的列名和列类型。设置该值可以在重用外部表的前提下提高，
                                    <samp class="ph codeph">gpload</samp>性能。但是如果实际的列不匹配，该工具会在实际执行
                                    时返回错误</dd>

                                <dd class="dd pd">默认值为false，工具会去预先检查外部表定义的列名和列类型。</dd>

                                <dd class="dd pd">
<samp class="ph codeph">REUSE_TABLES: true</samp>也必须被定义。如果
                                        <samp class="ph codeph">REUSE_TABLES</samp>为false或者没定义，并且
                                        <samp class="ph codeph">FAST_MATCH: true</samp>被指定，
                                        <samp class="ph codeph">gpload</samp>会返回告警信息。</dd>

                            
                        </dl>
</dd>

                
                
                    <dt class="dt pt dlterm" id="topic1__cfsql">SQL</dt>

                    <dd class="dd pd">可选。定义在装载操作之前或者之后要运行的SQL命令。用户可以指定多个<samp class="ph codeph">BEFORE</samp>
                        或者<samp class="ph codeph">AFTER</samp>命令。按照想要的执行顺序列出命令。<dl class="dl parml">
                            
                                <dt class="dt pt dlterm" id="topic1__cfbefore">BEFORE</dt>

                                <dd class="dd pd">可选。在装载操作开始之前要运行的一个SQL命令。将命令封闭在引号中。</dd>

                            
                            
                                <dt class="dt pt dlterm" id="topic1__cfafter">AFTER</dt>

                                <dd class="dd pd">可选。在装载操作完成之后要运行的一个SQL命令。将命令封闭在引号中。</dd>

                            
                        </dl>
</dd>

                
            </dl>

        </div>

        <div class="section" id="topic1__section9">
<h2 class="title sectiontitle">日志文件格式</h2>
            
            <p class="p"><samp class="ph codeph">gpload</samp>输出的日志文件具有下面的格式：</p>

            <pre class="pre codeblock"><var class="keyword varname">timestamp</var>|<var class="keyword varname">level</var>|<var class="keyword varname">message</var></pre>

            <p class="p">其中<var class="keyword varname">timestamp</var>的形式是：<samp class="ph codeph">YYYY-MM-DD
                HH:MM:SS</samp>，<var class="keyword varname">level</var>是<samp class="ph codeph">DEBUG</samp>、
                <samp class="ph codeph">LOG</samp>、<samp class="ph codeph">INFO</samp>、<samp class="ph codeph">ERROR</samp>中间的一个，
                而<var class="keyword varname">message</var>是普通文本消息。
            </p>

            <p class="p">日志文件中可能让人感兴趣的一些<samp class="ph codeph">INFO</samp>消息是（其中<var class="keyword varname">#</var>
                对应于实际的秒数、数据的单位或者失败的行）：
            </p>

            <pre class="pre codeblock">INFO|running time: <var class="keyword varname">#.##</var> seconds
INFO|transferred <var class="keyword varname">#.#</var> kB of <var class="keyword varname">#.#</var> kB.
INFO|gpload succeeded
INFO|gpload succeeded with warnings
INFO|gpload failed
INFO|1 bad row
INFO|<var class="keyword varname">#</var> bad rows</pre>

        </div>

        <div class="section" id="topic1__section8">
<h2 class="title sectiontitle">注解</h2>
            
            <p class="p">如果用户的数据库对象名使用双引号标识符（定界的标识符）创建，用户必须在<samp class="ph codeph">gpload</samp>
                控制文件中用单引号指定定界的名称。例如，如果用户这样创建一个表：
                </p>

            <pre class="pre codeblock">CREATE TABLE "MyTable" ("MyColumn" text);</pre>

            <p class="p">用户的YAML格式的<samp class="ph codeph">gpload</samp>控制文件应该按如下方式引用上述表和列名：
                </p>

            <pre class="pre codeblock">- COLUMNS:
   - '"MyColumn"': text
OUTPUT:
   - TABLE: public.'"MyTable"'</pre>

            <p class="p">如果YAML控制文件包含Greenplum数据库4.3.x的<samp class="ph codeph">ERROR_TABLE</samp>元素，
                <samp class="ph codeph">gpload</samp>会提示一个告警，显示表明<samp class="ph codeph">ERROR_TABLE</samp>
                是不支持的，如果<samp class="ph codeph">LOG_ERRORS</samp>和<samp class="ph codeph">REUSE_TABLE</samp>
                被设置为<samp class="ph codeph">true</samp>，加载错误信息会被正常处理。当运行在单行事务处理模式时，
                格式错误的行会被记录到内部数据库日志。</p>

        </div>

        <div class="section" id="topic1__section10">
<h2 class="title sectiontitle">示例</h2>
            
            <p class="p">按<samp class="ph codeph">my_load.yml</samp>中的定义运行一个装载作业：</p>

            <pre class="pre codeblock">gpload -f my_load.yml</pre>

            <p class="p">装载控制文件的例子：</p>

            <pre class="pre codeblock">---
VERSION: 1.0.0.1
DATABASE: ops
USER: gpadmin
HOST: mdw-1
PORT: 5432
GPLOAD:
   INPUT:
    - SOURCE:
         LOCAL_HOSTNAME:
           - etl1-1
           - etl1-2
           - etl1-3
           - etl1-4
         PORT: 8081
         FILE: 
           - /var/load/data/*
    - COLUMNS:
           - name: text
           - amount: float4
           - category: text
           - descr: text
           - date: date
    - FORMAT: text
    - DELIMITER: '|'
    - ERROR_LIMIT: 25
    - LOG_ERRORS: true
   OUTPUT:
    - TABLE: payables.expenses
    - MODE: INSERT
   PRELOAD:
    - REUSE_TABLES: true 
   SQL:
   - BEFORE: "INSERT INTO audit VALUES('start', current_timestamp)"
   - AFTER: "INSERT INTO audit VALUES('end', current_timestamp)"</pre>

        </div>

        <div class="section" id="topic1__section11">
<h2 class="title sectiontitle">另见</h2>
            
            <p class="p"><samp class="ph codeph"><a class="xref" href="gpfdist.html#topic1">gpfdist</a></samp>,
                <cite class="cite">Greenplum数据库参考指南</cite>中的<samp class="ph codeph">CREATE EXTERNAL TABLE</samp>。</p>

        </div>

    </div>



        

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    
  </footer>
</div><!--end of container-->

</body>
</html>
